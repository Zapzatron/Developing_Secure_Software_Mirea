<!DOCTYPE html>
<!-- saved from url=(0037)https://sdlc.yonote.ru/share/OS_Lab_1 -->
<html lang="ru" class="js-focus-visible" data-js-focus-visible=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Операционные системы. Практика 1 - Yonote</title>
  <meta name="theme-color" content="#FFF">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="tags: Операционные системы tutorials MIREA МИРЭА file Файловая система JSON XML сериализация ZIP">
  <meta name="darkreader-lock">
  <style type="text/css" data-tippy-stylesheet="">.tippy-iOS{cursor:pointer!important;-webkit-tap-highlight-color:transparent}.tippy-popper{transition-timing-function:cubic-bezier(.165,.84,.44,1);max-width:calc(100% - 8px);pointer-events:none;outline:0}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-7px;bottom:-6.5px;-webkit-transform-origin:50% 0;transform-origin:50% 0;margin:0 3px}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 3px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%)}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(-10px);transform:perspective(700px) translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateX(60deg);transform:perspective(700px) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=top] [data-animation=scale]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px) scale(.5);transform:translateY(-10px) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-7px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;margin:0 3px}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 3px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%)}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(10px);transform:perspective(700px) translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateX(-60deg);transform:perspective(700px) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=scale]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px) scale(.5);transform:translateY(10px) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-12px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%;margin:3px 0}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(-10px);transform:perspective(700px) translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateY(-60deg);transform:perspective(700px) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=left] [data-animation=scale]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px) scale(.5);transform:translateX(-10px) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-12px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%;margin:3px 0}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(10px);transform:perspective(700px) translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) rotateY(60deg);transform:perspective(700px) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-popper[x-placement^=right] [data-animation=scale]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px) scale(.5);transform:translateX(10px) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:.25rem;font-size:.875rem;padding:.3125rem .5625rem;line-height:1.4;text-align:center;background-color:#333}.tippy-tooltip[data-size=small]{padding:.1875rem .375rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.375rem .75rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:initial}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] .tippy-roundarrow path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:18px;height:7px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity;will-change:opacity}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}</style><link rel="manifest" href="https://sdlc.yonote.ru/static/manifest.webmanifest">
  
  
  
  <link rel="apple-touch-icon" type="image/png" href="https://cdn.s.yonote.ru/static/images/apple-touch-icon.png" sizes="192x192">
  <link rel="search" type="application/opensearchdescription+xml" href="https://sdlc.yonote.ru/opensearch.xml" title="Yonote">
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      width: 100%;
      height: 100%;
    }

    #root {
      flex: 1;
      min-height: 100%;
      width: 100%;
    }
  </style>
<style>@charset "UTF-8";.rdp{--rdp-cell-size: 40px;--rdp-caption-font-size: 18px;--rdp-accent-color: #0000ff;--rdp-background-color: #e7edff;--rdp-accent-color-dark: #3003e1;--rdp-background-color-dark: #180270;--rdp-outline: 2px solid var(--rdp-accent-color);--rdp-outline-selected: 3px solid var(--rdp-accent-color);--rdp-selected-color: #fff;margin:1em}.rdp-vhidden{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;position:absolute!important;top:0;width:1px!important;height:1px!important;padding:0!important;overflow:hidden!important;clip:rect(1px,1px,1px,1px)!important;border:0!important}.rdp-button_reset{appearance:none;position:relative;margin:0;padding:0;cursor:default;color:inherit;background:none;font:inherit;-moz-appearance:none;-webkit-appearance:none}.rdp-button_reset:focus-visible{outline:none}.rdp-button{border:2px solid transparent}.rdp-button[disabled]:not(.rdp-day_selected){opacity:.25}.rdp-button:not([disabled]){cursor:pointer}.rdp-button:focus-visible:not([disabled]){color:inherit;background-color:var(--rdp-background-color);border:var(--rdp-outline)}.rdp-button:hover:not([disabled]):not(.rdp-day_selected){background-color:var(--rdp-background-color)}.rdp-months{display:flex}.rdp-month{margin:0 1em}.rdp-month:first-child{margin-left:0}.rdp-month:last-child{margin-right:0}.rdp-table{margin:0;max-width:calc(var(--rdp-cell-size) * 7);border-collapse:collapse}.rdp-with_weeknumber .rdp-table{max-width:calc(var(--rdp-cell-size) * 8);border-collapse:collapse}.rdp-caption{display:flex;align-items:center;justify-content:space-between;padding:0;text-align:left}.rdp-multiple_months .rdp-caption{position:relative;display:block;text-align:center}.rdp-caption_dropdowns{position:relative;display:inline-flex}.rdp-caption_label{position:relative;z-index:1;display:inline-flex;align-items:center;margin:0;padding:0 .25em;white-space:nowrap;color:currentColor;border:0;border:2px solid transparent;font-family:inherit;font-size:var(--rdp-caption-font-size);font-weight:700}.rdp-nav{white-space:nowrap}.rdp-multiple_months .rdp-caption_start .rdp-nav{position:absolute;top:50%;left:0;transform:translateY(-50%)}.rdp-multiple_months .rdp-caption_end .rdp-nav{position:absolute;top:50%;right:0;transform:translateY(-50%)}.rdp-nav_button{display:inline-flex;align-items:center;justify-content:center;width:var(--rdp-cell-size);height:var(--rdp-cell-size);padding:.25em;border-radius:100%}.rdp-dropdown_year,.rdp-dropdown_month{position:relative;display:inline-flex;align-items:center}.rdp-dropdown{-webkit-appearance:none;appearance:none;position:absolute;z-index:2;top:0;bottom:0;left:0;width:100%;margin:0;padding:0;cursor:inherit;opacity:0;border:none;background-color:transparent;font-family:inherit;font-size:inherit;line-height:inherit}.rdp-dropdown[disabled]{opacity:unset;color:unset}.rdp-dropdown:focus-visible:not([disabled])+.rdp-caption_label{background-color:var(--rdp-background-color);border:var(--rdp-outline);border-radius:6px}.rdp-dropdown_icon{margin:0 0 0 5px}.rdp-head{border:0}.rdp-head_row,.rdp-row{height:100%}.rdp-head_cell{vertical-align:middle;font-size:.75em;font-weight:700;text-align:center;height:100%;height:var(--rdp-cell-size);padding:0;text-transform:uppercase}.rdp-tbody{border:0}.rdp-tfoot{margin:.5em}.rdp-cell{width:var(--rdp-cell-size);height:100%;height:var(--rdp-cell-size);padding:0;text-align:center}.rdp-weeknumber{font-size:.75em}.rdp-weeknumber,.rdp-day{display:flex;overflow:hidden;align-items:center;justify-content:center;box-sizing:border-box;width:var(--rdp-cell-size);max-width:var(--rdp-cell-size);height:var(--rdp-cell-size);margin:0;border:2px solid transparent;border-radius:100%}.rdp-day_today:not(.rdp-day_outside){font-weight:700}.rdp-day_selected,.rdp-day_selected:focus-visible,.rdp-day_selected:hover{color:var(--rdp-selected-color);opacity:1;background-color:var(--rdp-accent-color)}.rdp-day_outside{opacity:.5}.rdp-day_selected:focus-visible{outline:var(--rdp-outline);outline-offset:2px;z-index:1}.rdp:not([dir=rtl]) .rdp-day_range_start:not(.rdp-day_range_end){border-top-right-radius:0;border-bottom-right-radius:0}.rdp:not([dir=rtl]) .rdp-day_range_end:not(.rdp-day_range_start){border-top-left-radius:0;border-bottom-left-radius:0}.rdp[dir=rtl] .rdp-day_range_start:not(.rdp-day_range_end){border-top-left-radius:0;border-bottom-left-radius:0}.rdp[dir=rtl] .rdp-day_range_end:not(.rdp-day_range_start){border-top-right-radius:0;border-bottom-right-radius:0}.rdp-day_range_end.rdp-day_range_start{border-radius:100%}.rdp-day_range_middle{border-radius:0}.rbc-btn{color:inherit;font:inherit;margin:0}button.rbc-btn{overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer}button[disabled].rbc-btn{cursor:not-allowed}button.rbc-input::-moz-focus-inner{border:0;padding:0}.rbc-calendar{-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.rbc-calendar *,.rbc-calendar *:before,.rbc-calendar *:after{-webkit-box-sizing:inherit;box-sizing:inherit}.rbc-abs-full,.rbc-row-bg{overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0}.rbc-ellipsis,.rbc-show-more,.rbc-row-segment .rbc-event-content,.rbc-event-label{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rbc-rtl{direction:rtl}.rbc-off-range{color:#999}.rbc-off-range-bg{background:#e6e6e6}.rbc-header{overflow:hidden;-webkit-box-flex:1;-ms-flex:1 0 0%;flex:1 0 0%;text-overflow:ellipsis;white-space:nowrap;padding:0 3px;text-align:center;vertical-align:middle;font-weight:700;font-size:90%;min-height:0;border-bottom:1px solid #ddd}.rbc-header+.rbc-header{border-left:1px solid #ddd}.rbc-rtl .rbc-header+.rbc-header{border-left-width:0;border-right:1px solid #ddd}.rbc-header>a,.rbc-header>a:active,.rbc-header>a:visited{color:inherit;text-decoration:none}.rbc-button-link{color:inherit;background:none;margin:0;padding:0;border:none;cursor:pointer;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.rbc-row-content{position:relative;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;z-index:4}.rbc-row-content-scrollable{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}.rbc-row-content-scrollable .rbc-row-content-scroll-container{height:100%;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}.rbc-row-content-scrollable .rbc-row-content-scroll-container::-webkit-scrollbar{display:none}.rbc-today{background-color:#eaf6ff}.rbc-toolbar{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px;font-size:16px}.rbc-toolbar .rbc-toolbar-label{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:0 10px;text-align:center}.rbc-toolbar button{color:#373a3c;display:inline-block;margin:0;text-align:center;vertical-align:middle;background:none;background-image:none;border:1px solid #ccc;padding:.375rem 1rem;border-radius:4px;line-height:normal;white-space:nowrap}.rbc-toolbar button:active,.rbc-toolbar button.rbc-active{background-image:none;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px #00000020;background-color:#e6e6e6;border-color:#adadad}.rbc-toolbar button:active:hover,.rbc-toolbar button:active:focus,.rbc-toolbar button.rbc-active:hover,.rbc-toolbar button.rbc-active:focus{color:#373a3c;background-color:#d4d4d4;border-color:#8c8c8c}.rbc-toolbar button:focus{color:#373a3c;background-color:#e6e6e6;border-color:#adadad}.rbc-toolbar button:hover{color:#373a3c;background-color:#e6e6e6;border-color:#adadad}.rbc-btn-group{display:inline-block;white-space:nowrap}.rbc-btn-group>button:first-child:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.rbc-btn-group>button:last-child:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.rbc-rtl .rbc-btn-group>button:first-child:not(:last-child){border-radius:0 4px 4px 0}.rbc-rtl .rbc-btn-group>button:last-child:not(:first-child){border-radius:4px 0 0 4px}.rbc-btn-group>button:not(:first-child):not(:last-child){border-radius:0}.rbc-btn-group button+button{margin-left:-1px}.rbc-rtl .rbc-btn-group button+button{margin-left:0;margin-right:-1px}.rbc-btn-group+.rbc-btn-group,.rbc-btn-group+button{margin-left:10px}.rbc-event,.rbc-day-slot .rbc-background-event{border:none;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:none;box-shadow:none;margin:0;padding:2px 5px;background-color:#3174ad;border-radius:5px;color:#fff;cursor:pointer;width:100%;text-align:left}.rbc-slot-selecting .rbc-event,.rbc-slot-selecting .rbc-day-slot .rbc-background-event,.rbc-day-slot .rbc-slot-selecting .rbc-background-event{cursor:inherit;pointer-events:none}.rbc-event.rbc-selected,.rbc-day-slot .rbc-selected.rbc-background-event{background-color:#265985}.rbc-event:focus,.rbc-day-slot .rbc-background-event:focus{outline:5px auto #3b99fc}.rbc-event-label{font-size:80%}.rbc-event-overlaps{-webkit-box-shadow:-1px 1px 5px 0px rgba(51,51,51,.5);box-shadow:-1px 1px 5px #33333380}.rbc-event-continues-prior{border-top-left-radius:0;border-bottom-left-radius:0}.rbc-event-continues-after{border-top-right-radius:0;border-bottom-right-radius:0}.rbc-event-continues-earlier{border-top-left-radius:0;border-top-right-radius:0}.rbc-event-continues-later{border-bottom-left-radius:0;border-bottom-right-radius:0}.rbc-row{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.rbc-row-segment{padding:0 1px 1px}.rbc-selected-cell{background-color:#0000001a}.rbc-show-more{background-color:#ffffff4d;z-index:4;font-weight:700;font-size:85%;height:auto;line-height:normal;color:#3174ad}.rbc-show-more:hover,.rbc-show-more:focus{color:#265985}.rbc-month-view{position:relative;border:1px solid #ddd;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0;width:100%;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;height:100%}.rbc-month-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.rbc-month-row{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0;-ms-flex-preferred-size:0px;flex-basis:0px;overflow:hidden;height:100%}.rbc-month-row+.rbc-month-row{border-top:1px solid #ddd}.rbc-date-cell{-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;min-width:0;padding-right:5px;text-align:right}.rbc-date-cell.rbc-now{font-weight:700}.rbc-date-cell>a,.rbc-date-cell>a:active,.rbc-date-cell>a:visited{color:inherit;text-decoration:none}.rbc-row-bg{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0;overflow:hidden}.rbc-day-bg{-webkit-box-flex:1;-ms-flex:1 0 0%;flex:1 0 0%}.rbc-day-bg+.rbc-day-bg{border-left:1px solid #ddd}.rbc-rtl .rbc-day-bg+.rbc-day-bg{border-left-width:0;border-right:1px solid #ddd}.rbc-overlay{position:absolute;z-index:5;border:1px solid #e5e5e5;background-color:#fff;-webkit-box-shadow:0 5px 15px rgba(0,0,0,.25);box-shadow:0 5px 15px #00000040;padding:10px}.rbc-overlay>*+*{margin-top:1px}.rbc-overlay-header{border-bottom:1px solid #e5e5e5;margin:-10px -10px 5px;padding:2px 10px}.rbc-agenda-view{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0;overflow:auto}.rbc-agenda-view table.rbc-agenda-table{width:100%;border:1px solid #ddd;border-spacing:0;border-collapse:collapse}.rbc-agenda-view table.rbc-agenda-table tbody>tr>td{padding:5px 10px;vertical-align:top}.rbc-agenda-view table.rbc-agenda-table .rbc-agenda-time-cell{padding-left:15px;padding-right:15px;text-transform:lowercase}.rbc-agenda-view table.rbc-agenda-table tbody>tr>td+td{border-left:1px solid #ddd}.rbc-rtl .rbc-agenda-view table.rbc-agenda-table tbody>tr>td+td{border-left-width:0;border-right:1px solid #ddd}.rbc-agenda-view table.rbc-agenda-table tbody>tr+tr{border-top:1px solid #ddd}.rbc-agenda-view table.rbc-agenda-table thead>tr>th{padding:3px 5px;text-align:left;border-bottom:1px solid #ddd}.rbc-rtl .rbc-agenda-view table.rbc-agenda-table thead>tr>th{text-align:right}.rbc-agenda-time-cell{text-transform:lowercase}.rbc-agenda-time-cell .rbc-continues-after:after{content:" »"}.rbc-agenda-time-cell .rbc-continues-prior:before{content:"« "}.rbc-agenda-date-cell,.rbc-agenda-time-cell{white-space:nowrap}.rbc-agenda-event-cell{width:100%}.rbc-time-column{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%}.rbc-time-column .rbc-timeslot-group{-webkit-box-flex:1;-ms-flex:1;flex:1}.rbc-timeslot-group{border-bottom:1px solid #ddd;min-height:40px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap}.rbc-time-gutter,.rbc-header-gutter{-webkit-box-flex:0;-ms-flex:none;flex:none}.rbc-label{padding:0 5px}.rbc-day-slot{position:relative}.rbc-day-slot .rbc-events-container{bottom:0;left:0;position:absolute;right:0;margin-right:10px;top:0}.rbc-day-slot .rbc-events-container.rbc-rtl{left:10px;right:0}.rbc-day-slot .rbc-event,.rbc-day-slot .rbc-background-event{border:1px solid #265985;display:-webkit-box;display:-ms-flexbox;display:flex;max-height:100%;min-height:20px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column wrap;flex-flow:column wrap;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;overflow:hidden;position:absolute}.rbc-day-slot .rbc-background-event{opacity:.75}.rbc-day-slot .rbc-event-label{-webkit-box-flex:0;-ms-flex:none;flex:none;padding-right:5px;width:auto}.rbc-day-slot .rbc-event-content{width:100%;-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;word-wrap:break-word;line-height:1;height:100%;min-height:1em}.rbc-day-slot .rbc-time-slot{border-top:1px solid #f7f7f7}.rbc-time-view-resources .rbc-time-gutter,.rbc-time-view-resources .rbc-time-header-gutter{position:-webkit-sticky;position:sticky;left:0;background-color:#fff;border-right:1px solid #ddd;z-index:10;margin-right:-1px}.rbc-time-view-resources .rbc-time-header{overflow:hidden}.rbc-time-view-resources .rbc-time-header-content{min-width:auto;-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0;-ms-flex-preferred-size:0px;flex-basis:0px}.rbc-time-view-resources .rbc-time-header-cell-single-day{display:none}.rbc-time-view-resources .rbc-day-slot{min-width:140px}.rbc-time-view-resources .rbc-header,.rbc-time-view-resources .rbc-day-bg{width:140px;-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;-ms-flex-preferred-size:0 px;flex-basis:0 px}.rbc-time-header-content+.rbc-time-header-content{margin-left:-1px}.rbc-time-slot{-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0}.rbc-time-slot.rbc-now{font-weight:700}.rbc-day-header{text-align:center}.rbc-slot-selection{z-index:10;position:absolute;background-color:#00000080;color:#fff;font-size:75%;width:100%;padding:3px}.rbc-slot-selecting{cursor:move}.rbc-time-view{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%;border:1px solid #ddd;min-height:0}.rbc-time-view .rbc-time-gutter{white-space:nowrap;text-align:right}.rbc-time-view .rbc-allday-cell{-webkit-box-sizing:content-box;box-sizing:content-box;width:100%;height:100%;position:relative}.rbc-time-view .rbc-allday-cell+.rbc-allday-cell{border-left:1px solid #ddd}.rbc-time-view .rbc-allday-events{position:relative;z-index:4}.rbc-time-view .rbc-row{-webkit-box-sizing:border-box;box-sizing:border-box;min-height:20px}.rbc-time-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.rbc-time-header.rbc-overflowing{border-right:1px solid #ddd}.rbc-rtl .rbc-time-header.rbc-overflowing{border-right-width:0;border-left:1px solid #ddd}.rbc-time-header>.rbc-row:first-child{border-bottom:1px solid #ddd}.rbc-time-header>.rbc-row.rbc-row-resource{border-bottom:1px solid #ddd}.rbc-time-header-cell-single-day{display:none}.rbc-time-header-content{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;min-width:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border-left:1px solid #ddd}.rbc-rtl .rbc-time-header-content{border-left-width:0;border-right:1px solid #ddd}.rbc-time-header-content>.rbc-row.rbc-row-resource{border-bottom:1px solid #ddd;-ms-flex-negative:0;flex-shrink:0}.rbc-time-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 0 0%;flex:1 0 0%;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;width:100%;border-top:2px solid #ddd;overflow-y:auto;position:relative}.rbc-time-content>.rbc-time-gutter{-webkit-box-flex:0;-ms-flex:none;flex:none}.rbc-time-content>*+*>*{border-left:1px solid #ddd}.rbc-rtl .rbc-time-content>*+*>*{border-left-width:0;border-right:1px solid #ddd}.rbc-time-content>.rbc-day-slot{width:100%;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.rbc-current-time-indicator{position:absolute;z-index:3;left:0;right:0;height:1px;background-color:#74ad31;pointer-events:none}.rbc-addons-dnd .rbc-addons-dnd-row-body{position:relative}.rbc-addons-dnd .rbc-addons-dnd-drag-row{position:absolute;top:0;left:0;right:0}.rbc-addons-dnd .rbc-addons-dnd-over{background-color:#0000004d}.rbc-addons-dnd .rbc-event{transition:opacity .15s}.rbc-addons-dnd .rbc-event:hover .rbc-addons-dnd-resize-ns-icon,.rbc-addons-dnd .rbc-event:hover .rbc-addons-dnd-resize-ew-icon{display:block}.rbc-addons-dnd .rbc-addons-dnd-dragged-event{opacity:0}.rbc-addons-dnd.rbc-addons-dnd-is-dragging .rbc-event:not(.rbc-addons-dnd-dragged-event):not(.rbc-addons-dnd-drag-preview){opacity:.5}.rbc-addons-dnd .rbc-addons-dnd-resizable{position:relative;width:100%;height:100%}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor{width:100%;text-align:center;position:absolute}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor:first-child{top:0}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor:last-child{bottom:0}.rbc-addons-dnd .rbc-addons-dnd-resize-ns-anchor .rbc-addons-dnd-resize-ns-icon{display:none;border-top:3px double;margin:0 auto;width:10px;cursor:ns-resize}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor{position:absolute;top:4px;bottom:0}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor:first-child{left:0}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor:last-child{right:0}.rbc-addons-dnd .rbc-addons-dnd-resize-ew-anchor .rbc-addons-dnd-resize-ew-icon{display:none;border-left:3px double;margin-top:auto;margin-bottom:auto;height:10px;cursor:ew-resize}</style><style data-styled="active" data-styled-version="5.3.11"></style><link rel="modulepreload" as="script" crossorigin="" href="https://sdlc.yonote.ru/static/assets/Shared-DdoVD9Ko.js"><link rel="modulepreload" as="script" crossorigin="" href="https://sdlc.yonote.ru/static/assets/Error404-BrFoRXbi.js"><link rel="modulepreload" as="script" crossorigin="" href="https://sdlc.yonote.ru/static/assets/ErrorOffline-DU80S2_5.js"><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg width=&#39;86&#39; height=&#39;86&#39; viewBox=&#39;0 0 86 86&#39; fill=&#39;none&#39; xmlns=&#39;http://www.w3.org/2000/svg&#39;%3E%3Cg clip-path=&#39;url(%23clip0_663_8)&#39;%3E%3Cpath d=&#39;M2.5 74.5V19H10V15.5L11.5 10H18.5V5L20.5 1H80L83 3V66H74.5V74.5H66V82.5L54.5 84L2.5 74.5Z&#39; fill=&#39;white&#39;/%3E%3Cpath d=&#39;M80.19 0H21.59C20.3045 0.00264233 19.0724 0.514472 18.1635 1.42345C17.2545 2.33243 16.7426 3.56451 16.74 4.85V8.37H13.22C11.9345 8.37264 10.7024 8.88447 9.79345 9.79345C8.88447 10.7024 8.37264 11.9345 8.37 13.22V16.74H4.85C3.56451 16.7426 2.33243 17.2545 1.42345 18.1635C0.514472 19.0724 0.00264233 20.3045 0 21.59L0 76.59L50.44 85C50.7039 85.0485 50.9717 85.072 51.24 85.07H63.45C64.7355 85.0674 65.9676 84.5555 66.8765 83.6465C67.7855 82.7376 68.2974 81.5055 68.3 80.22V76.67H71.82C73.1055 76.6674 74.3376 76.1555 75.2466 75.2466C76.1555 74.3376 76.6674 73.1055 76.67 71.82V68.3H80.19C81.4685 68.2869 82.6904 67.7704 83.5908 66.8625C84.4911 65.9547 84.9974 64.7286 85 63.45V4.85C84.9974 3.5714 84.4911 2.34531 83.5908 1.43746C82.6904 0.529617 81.4685 0.0131518 80.19 0ZM12.45 67.14C12.647 66.9432 12.8809 66.7871 13.1383 66.6808C13.3957 66.5744 13.6715 66.5198 13.95 66.52C14.3009 66.5234 14.6451 66.6163 14.95 66.79L37.68 79.4L5.55 74L12.45 67.14ZM16.63 63.81C15.8097 63.3551 14.888 63.1144 13.95 63.11C13.2252 63.1092 12.5074 63.252 11.838 63.53C11.1686 63.808 10.5609 64.2159 10.05 64.73L3.4 71.37V21.59C3.4 21.2054 3.55277 20.8366 3.8247 20.5647C4.09662 20.2928 4.46544 20.14 4.85 20.14H63.45C63.8328 20.1426 64.1991 20.2966 64.4688 20.5682C64.7386 20.8399 64.89 21.2072 64.89 21.59V80.19C64.89 80.5728 64.7386 80.9401 64.4688 81.2118C64.1991 81.4834 63.8328 81.6374 63.45 81.64H51.24H51L47.69 81.08L16.63 63.81ZM63.45 16.74H11.77V13.22C11.77 12.8354 11.9228 12.4666 12.1947 12.1947C12.4666 11.9228 12.8354 11.77 13.22 11.77H71.82C72.2038 11.7726 72.571 11.9262 72.8424 12.1976C73.1138 12.469 73.2674 12.8362 73.27 13.22V71.82C73.2674 72.2038 73.1138 72.571 72.8424 72.8424C72.571 73.1138 72.2038 73.2674 71.82 73.27H68.3V21.59C68.2974 20.3045 67.7855 19.0724 66.8765 18.1635C65.9676 17.2545 64.7355 16.7426 63.45 16.74ZM71.82 8.37H20.14V4.85C20.14 4.46544 20.2928 4.09662 20.5647 3.8247C20.8366 3.55277 21.2054 3.4 21.59 3.4H80.19C80.5746 3.4 80.9434 3.55277 81.2153 3.8247C81.4872 4.09662 81.64 4.46544 81.64 4.85V63.45C81.6374 63.8328 81.4834 64.1991 81.2118 64.4688C80.9401 64.7386 80.5728 64.89 80.19 64.89H76.67V13.22C76.6674 11.9345 76.1555 10.7024 75.2466 9.79345C74.3376 8.88447 73.1055 8.37264 71.82 8.37Z&#39; fill=&#39;%231D1D1B&#39;/%3E%3Cpath d=&#39;M31.43 28.0698L23.66 41.7098L15.82 28.0698H10.21L21.23 46.5298V59.9898H26.04V46.4998L37.06 28.0698H31.43Z&#39; fill=&#39;%231D1D1B&#39;/%3E%3Cpath d=&#39;M45.28 34.29C42.667 34.2225 40.0932 34.9351 37.8871 36.337C35.6811 37.739 33.9428 39.7665 32.8943 42.1609C31.8459 44.5552 31.5347 47.2077 32.0006 49.7797C32.4666 52.3516 33.6884 54.7264 35.5102 56.6008C37.3319 58.4752 39.671 59.7641 42.2286 60.3031C44.7863 60.842 47.4466 60.6065 49.8698 59.6266C52.293 58.6467 54.3692 56.9669 55.8334 54.8016C57.2975 52.6364 58.0832 50.0839 58.09 47.47C58.1381 44.0238 56.8157 40.6996 54.4136 38.2281C52.0114 35.7565 48.7262 34.3401 45.28 34.29ZM45.28 56.1C44.1687 56.0835 43.072 55.8452 42.054 55.3992C41.036 54.9533 40.1173 54.3086 39.3517 53.5029C38.5861 52.6973 37.9891 51.7469 37.5955 50.7076C37.202 49.6682 37.0199 48.5607 37.06 47.45C37.0035 45.2102 37.8368 43.0392 39.3774 41.4124C40.918 39.7856 43.0404 38.8355 45.28 38.77C47.5152 38.8406 49.6315 39.7933 51.1663 41.4199C52.701 43.0465 53.5293 45.2145 53.47 47.45C53.5114 48.5586 53.3312 49.6642 52.9401 50.7022C52.5489 51.7403 51.9546 52.6898 51.1919 53.4953C50.4292 54.3008 49.5135 54.9461 48.4984 55.3934C47.4833 55.8406 46.3891 56.0809 45.28 56.1Z&#39; fill=&#39;%231D1D1B&#39;/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id=&#39;clip0_663_8&#39;%3E%3Crect width=&#39;85.04&#39; height=&#39;85.04&#39; fill=&#39;white&#39;/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E%0A"><link rel="canonical" href="https://sdlc.yonote.ru/share/OS_Lab_1" data-rh="true"><meta name="viewport" content="width=device-width, initial-scale=1.0" data-rh="true"><meta name="viewport" content="width=device-width, initial-scale=1.0" data-react-helmet="true"></head>

<body style="background: rgb(255, 255, 255); padding-right: 0px;">
<div id="root"><div><script type="text/javascript" async="" src="./Операционные системы. Практика 1 - Yonote_files/tag.js.Без названия"></script></div><ol class="sc-1ogk0xu-0 bjHYJf"></ol><div class="l6xzt7-0 sc-1613ni1-0 bAIaFn bhHSsf" style=""><a href="https://sdlc.yonote.ru/share/OS_Lab_1#skip-nav" class="dd4ukd-0 iWAqGQ">Skip navigation</a><div class="l6xzt7-0 sc-1613ni1-0 epPeDH bhHSsf"><div id="skip-nav"></div><div class="l6xzt7-0 sc-1613ni1-1 hjlJCU fNeKbI"><div class="l6xzt7-0 t74mve-0 w9o6sj-0 bAIaFn dLroHZ jXbgKD"><div id="document-container-9f3ce042-cc34-4131-b19c-c2e0dedba7ca" class="l6xzt7-0 t74mve-0 iXWdMQ dLroHZ main-document-container" data-in-modal="false"><div class="l6xzt7-0 sc-9mwrea-3 irAXfl lfqNsB document-header"><div class="sc-9mwrea-1 cjByck"><div class="l6xzt7-0 sc-1ghsic6-0 nqbQT iBrcUI breadcrumb-wrapper"><button mode="flat" class="sc-1v5z4h6-0 ezJsZh undefined icon-only"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16m-10 6h10M6 18h14"></path></svg></button></div></div><div></div><div class="l6xzt7-0 sc-9mwrea-2 dGaUjw cWAqRD"><div class="l6xzt7-0 lkhftw-0 jbltae hqkFrq"><button mode="flat" class="sc-1v5z4h6-0 ezJsZh undefined icon-only"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7"></path></svg></button></div><div class="l6xzt7-0 lkhftw-0 jbltae hqkFrq"><span aria-expanded="false" aria-haspopup="dialog" class="popover-disclosure" role="button" tabindex="0"><button mode="flat" class="sc-1v5z4h6-0 ezJsZh undefined icon-only"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M7 9.667A2.667 2.667 0 0 1 9.667 7h8.666A2.667 2.667 0 0 1 21 9.667v8.666A2.667 2.667 0 0 1 18.333 21H9.667A2.667 2.667 0 0 1 7 18.333z"></path><path d="M4.012 16.737A2 2 0 0 1 3 15V5c0-1.1.9-2 2-2h10c.75 0 1.158.385 1.5 1"></path></g></svg></button></span></div><div></div><div class="lkhftw-1 iNXDPg"></div><a href="https://yonote.ru/" class="sc-1qkm0wd-0 hxKmDc"><svg fill="#333" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.5 85.04" width="100" height="20" x="0px" y="0px"><g id="Слой_2" data-name="Слой 2"><g id="Слой_1-2" data-name="Слой 1"><polygon class="cls-1" points="134.85 16.77 121.78 39.7 108.61 16.77 100.53 16.77 118.28 46.51 118.28 68.3 125.22 68.3 125.22 46.47 142.97 16.77 134.85 16.77"></polygon><path class="cls-1" d="M161.58,27c-11.38,0-20.65,9.5-20.65,21.18a20.62,20.62,0,1,0,41.22,0C182.15,36.51,172.92,27,161.58,27Zm0,35.86c-7.85,0-14-6.47-14-14.71s6.27-14.75,14-14.75S175.53,40,175.53,48.16,169.4,62.87,161.58,62.87Z"></path><polygon class="cls-1" points="226.6 68.3 226.6 27.76 219.84 27.76 219.84 57.42 196.58 27.76 189.87 27.76 189.87 68.3 196.6 68.3 196.6 37.94 220.14 68.3 226.6 68.3"></polygon><path class="cls-1" d="M255,27c-11.38,0-20.64,9.5-20.64,21.18s9.23,21.08,20.57,21.08a20.9,20.9,0,0,0,20.68-21.08C275.57,36.51,266.33,27,255,27Zm0,35.86c-7.87,0-14-6.47-14-14.71s6.29-14.75,14-14.75S268.92,40,268.92,48.16,262.67,62.87,255,62.87Z"></path><polygon class="cls-1" points="313.41 27.76 279.92 27.76 279.92 34.17 293.25 34.17 293.25 68.3 300.01 68.3 300.01 34.17 313.41 34.17 313.41 27.76"></polygon><polygon class="cls-1" points="346.72 50.8 346.72 44.54 327.85 44.54 327.85 34.13 351.06 34.13 351.06 27.76 321.13 27.76 321.13 68.3 351.5 68.3 351.5 61.93 327.85 61.93 327.85 50.8 346.72 50.8"></polygon><path class="cls-1" d="M80.19,0H21.59a4.86,4.86,0,0,0-4.85,4.85V8.37H13.22a4.86,4.86,0,0,0-4.85,4.85v3.52H4.85A4.86,4.86,0,0,0,0,21.59v55L50.44,85a4.25,4.25,0,0,0,.8.07h12.2a4.86,4.86,0,0,0,4.86-4.85V76.67h3.52a4.86,4.86,0,0,0,4.85-4.85V68.3h3.52A4.86,4.86,0,0,0,85,63.45V4.85A4.86,4.86,0,0,0,80.19,0ZM12.45,67.14a2.12,2.12,0,0,1,1.5-.62,2.06,2.06,0,0,1,1,.27L37.68,79.4,5.55,74Zm4.18-3.33a5.58,5.58,0,0,0-2.68-.7,5.49,5.49,0,0,0-3.9,1.62L3.4,71.37V21.59a1.45,1.45,0,0,1,1.45-1.45H63.44a1.45,1.45,0,0,1,1.45,1.45v58.6a1.45,1.45,0,0,1-1.45,1.45H51.24l-.24,0-3.31-.56ZM63.44,16.74H11.77V13.22a1.45,1.45,0,0,1,1.45-1.45h58.6a1.46,1.46,0,0,1,1.45,1.45v58.6a1.46,1.46,0,0,1-1.45,1.45H68.3V21.59A4.86,4.86,0,0,0,63.44,16.74Zm8.38-8.37H20.14V4.85A1.45,1.45,0,0,1,21.59,3.4h58.6a1.46,1.46,0,0,1,1.45,1.45v58.6a1.46,1.46,0,0,1-1.45,1.44H76.67V13.22A4.86,4.86,0,0,0,71.82,8.37Z"></path><polygon class="cls-1" points="31.43 28.07 23.66 41.71 15.82 28.07 10.21 28.07 21.23 46.53 21.23 59.99 26.04 59.99 26.04 46.5 37.06 28.07 31.43 28.07"></polygon><path class="cls-1" d="M45.28,34.29A13.15,13.15,0,1,0,58.09,47.47,13,13,0,0,0,45.28,34.29Zm0,21.81a8.35,8.35,0,0,1-8.22-8.65,8.47,8.47,0,0,1,8.22-8.68,8.46,8.46,0,0,1,8.19,8.68A8.34,8.34,0,0,1,45.28,56.1Z"></path></g></g></svg></a></div></div><div class="w9o6sj-1 ihjGqw max-width-wrapper"><div data-document-container="true" class="l6xzt7-0 w9o6sj-2 bAIaFn keJAsY"><div class="l6xzt7-0 w9o6sj-3 jbltae fYPMVh document-editor-wrapper"><div class="l6xzt7-0 bAIaFn"><div readonly="" class="l6xzt7-0 byvtt9-0 kdkvOy fjjZAH document-title-wrapper"><div class="byvtt9-1 eNJnVj" dir="auto"><div id=":r0:" contenteditable="false" data-placeholder="Без названия" role="textbox" class="sc-13ctu31-0 fgiXOY editable-content" data-testid="documentEditableTitle">Операционные системы. Практика 1</div></div></div><div class="kafe94-0 ldJaxk"><div class="l6xzt7-0 sc-5010v3-0 fkUFLX cuudgR" dir="auto"><div dir="auto" class="sc-1btj66m-0 kdFbTf editor-container"><div contenteditable="false" translate="no" class="ProseMirror read-only" role="textbox"><a id="h-tags-operacionnye-sistemy-tutorials-mirea-mirea-file-fajlovaya-sistema-json-xml-serializaciya-zip" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h6 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>tags: <code class="inline" spellcheck="false">Операционные системы</code> <code class="inline" spellcheck="false">tutorials</code> <code class="inline" spellcheck="false">MIREA</code> <code class="inline" spellcheck="false">МИРЭА</code> <code class="inline" spellcheck="false">file</code> <code class="inline" spellcheck="false">Файловая система</code> <code class="inline" spellcheck="false">JSON</code> <code class="inline" spellcheck="false">XML</code> <code class="inline" spellcheck="false">сериализация</code> <code class="inline" spellcheck="false">ZIP</code></span></h6><p class="">@author: Latypova Olga </p><p class="">reviewed: 2024-09-11 </p><p class="">группы: </p><p class=""><strong>Ссылка на курс: <a href="https://sdlc.yonote.ru/share/OS_Lab_1" class="link-mark" rel="noopener noreferrer nofollow">https://sdlc.yonote.ru/share/OS_Lab_1</a></strong> </p><p class="">В локальной сети РТУ МИРЭА: <strong>S:\КБ-2\Разработка безопасного программного обеспечения\SDL Практика 1.docx</strong> </p><p class="">пароль от Astra Linux в аудитории 343 mireakb2</p><a id="h-zadanie" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h2 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Задание</span></h2><a id="h-kratkoe-zadanie" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Краткое задание</span></h3><p class="">Разработать программу для взаимодействия с файлами в различных форматах с возможностью их модификации, создания или удаления. Разработанный код должен иметь возможность его повторного использования и модификации.</p><a id="h-detalьnoe-zadanie" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Детальное задание</span></h3><ol class="ordered_list"><li class="list_item"><p class="">Вывести информацию в консоль о логических дисках, именах, метке тома, размере и типе файловой системы.</p></li><li class="list_item"><p class="">Работа  с файлами ( класс File, FileInfo, FileStream и другие)</p></li></ol><ul class="bullet_list"><li class="list_item"><p class="">Создать файл</p></li><li class="list_item"><p class="">Записать в файл строку, введённую пользователем</p></li><li class="list_item"><p class="">Прочитать файл в консоль</p></li><li class="list_item"><p class="">Удалить файл</p></li></ul><ol class="ordered_list" start="3"><li class="list_item"><p class="">Работа с форматом JSON</p></li></ol><ul class="bullet_list"><li class="list_item"><p class="">Создать файл формате JSON в любом редакторе или с использованием данных, введенных пользователем</p></li><li class="list_item"><p class="">Создать новый объект. Выполнить сериализацию объекта в формате JSON и записать в файл.</p></li><li class="list_item"><p class="">Прочитать файл в консоль</p></li><li class="list_item"><p class="">Удалить файл</p></li></ul><ol class="ordered_list" start="4"><li class="list_item"><p class="">Работа с форматом XML</p></li></ol><ul class="bullet_list"><li class="list_item"><p class="">Создать файл формате XML  из редактора</p></li><li class="list_item"><p class="">Записать в файл новые данные из консоли .</p></li><li class="list_item"><p class="">Прочитать файл в консоль.</p></li><li class="list_item"><p class="">Удалить файл.</p></li></ul><ol class="ordered_list" start="5"><li class="list_item"><p class="">Создание zip архива, добавление туда файла, определение размера архива</p></li></ol><ul class="bullet_list"><li class="list_item"><p class="">Создать архив в форматер zip</p></li><li class="list_item"><p class="">Добавить файл, выбранный пользователем, в архив</p></li><li class="list_item"><p class="">Разархивировать файл и вывести данные о нем</p></li><li class="list_item"><p class="">Удалить файл и архив</p></li></ul><div class="notice-block warning"><div contenteditable="false"><div class="notice-actions"><select><option value="info">Детали</option><option value="warning">Внимание</option><option value="tip">Подсказка</option></select></div></div><div class="content"><div class="icon ProseMirror-widget" contenteditable="false"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="#d73a49" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v4m-1.637-9.409L2.257 17.125a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636-2.87L13.637 3.59a1.914 1.914 0 0 0-3.274 0zM12 16h.01"></path></svg></div><p class="">Выполнение задания допускается на любом языке программирования.</p></div></div><a id="h-literatura" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h2 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Литература:</span></h2><ol class="ordered_list"><li class="list_item"><p class=""><a href="https://metanit.com/sharp/tutorial/" class="link-mark" rel="noopener noreferrer nofollow">Полное руководство по языку программирования С# 9.0 и платформе .NET 5</a></p></li></ol><a id="h-teoreticheskaya-chastь" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h2 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Теоретическая часть.</span></h2><a id="h-rabota-s-potokami-i-fajlovoj-sistemoj" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с потоками и файловой системой</span></h3><p class="">Большинство задач в программировании так или иначе связаны с работой с файлами и каталогами. Нам может потребоваться прочитать текст из файла или наоборот произвести запись, удалить файл или целый каталог, не говоря уже о более комплексных задачах, как например, создание текстового редактора и других подобных задачах.</p><p class="">Фреймворк .NET предоставляет большие возможности по управлению и манипуляции файлами и каталогами, которые по большей части сосредоточены в пространстве имен System.IO. Классы, расположенные в этом пространстве имен (такие как Stream, StreamWriter, FileStream и др.), позволяют управлять файловым вводом-выводом.</p><a id="h-rabota-s-diskami" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с дисками</span></h3><p class="">Работу с файловой системой начнем с самого верхнего уровня - дисков. Для представления диска в пространстве имен System.IO имеется класс DriveInfo.</p><p class="">Этот класс имеет статический метод GetDrives, который возвращает имена всех логических дисков компьютера. Также он предоставляет ряд полезных свойств:</p><ul class="bullet_list"><li class="list_item"><p class=""><strong>AvailableFreeSpace</strong>: указывает на объем доступного свободного места на диске в байтах</p></li><li class="list_item"><p class=""><strong>DriveFormat</strong>: получает имя файловой системы</p></li><li class="list_item"><p class=""><strong>DriveType</strong>: представляет тип диска</p></li><li class="list_item"><p class=""><strong>IsReady</strong>: готов ли диск (например, DVD-диск может быть не вставлен в дисковод)</p></li><li class="list_item"><p class=""><strong>Name</strong>: получает имя диска</p></li><li class="list_item"><p class=""><strong>TotalFreeSpace</strong>: получает общий объем свободного места на диске в байтах</p></li><li class="list_item"><p class=""><strong>TotalSize</strong>: общий размер диска в байтах</p></li><li class="list_item"><p class=""><strong>VolumeLabel</strong>: получает или устанавливает метку тома</p></li></ul><p class="">Получим имена и свойства всех дисков на компьютере:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
 
namespace HelloApp
{
    class Program
    {
        static void Main(string[] args)
        {
            DriveInfo[] drives = DriveInfo.GetDrives();
 
            foreach (DriveInfo drive in drives)
            {
                Console.WriteLine($"Название: {drive.Name}");
                Console.WriteLine($"Тип: {drive.DriveType}");
                if (drive.IsReady)
                {
                    Console.WriteLine($"Объем диска: {drive.TotalSize}");
                    Console.WriteLine($"Свободное пространство: {drive.TotalFreeSpace}");
                    Console.WriteLine($"Метка: {drive.VolumeLabel}");
                }
                Console.WriteLine();
            }
        }
    }
}</code></pre></div><p class=""><span class="component-image" contenteditable="false" draggable="true"><div contenteditable="false" class="t10yga-4 lcgrlL image" style="width: 100%;"><button class="t10yga-2 bBRluN"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5l5-5m-5-7v12"></path></svg></button><img src="./Операционные системы. Практика 1 - Yonote_files/F0kmlFE.png" style="cursor: inherit;"><div class="t10yga-1 ewFUpO resize-marker"><div class="t10yga-0 dspLOs"></div></div><div class="t10yga-1 kfCAcN resize-marker"><div class="t10yga-0 gHyGzf"></div></div></div><p class="t10yga-3 bXmfPS image-caption" tabindex="-1" role="textbox" data-caption="Напишите подпись" style="width: 100%; margin: 0px auto;"></p></span><img class="ProseMirror-separator" alt=""><br class="ProseMirror-trailingBreak"></p><a id="h-rabota-s-katalogami" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с каталогами</span></h3><p class="">Для работы с каталогами в пространстве имен System.IO предназначены сразу два класса: Directory и DirectoryInfo.</p><a id="h-klass-directory" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Класс Directory</span></h4><p class="">Класс Directory предоставляет ряд статических методов для управления каталогами. Некоторые из этих методов:</p><ul class="bullet_list"><li class="list_item"><p class=""><strong>CreateDirectory(path)</strong>: создает каталог по указанному пути path</p></li><li class="list_item"><p class=""><strong>Delete(path)</strong>: удаляет каталог по указанному пути path</p></li><li class="list_item"><p class=""><strong>Exists(path)</strong>: определяет, существует ли каталог по указанному пути path. Если существует, возвращается true, если не существует, то false</p></li><li class="list_item"><p class=""><strong>GetDirectories(path)</strong>: получает список каталогов в каталоге path</p></li><li class="list_item"><p class=""><strong>GetFiles(path)</strong>: получает список файлов в каталоге path</p></li><li class="list_item"><p class=""><strong>Move(sourceDirName, destDirName)</strong>: перемещает каталог</p></li><li class="list_item"><p class=""><strong>GetParent(path)</strong>: получение родительского каталога</p></li></ul><a id="h-klass-directoryinfo" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Класс DirectoryInfo</span></h4><p class="">Данный класс предоставляет функциональность для создания, удаления, перемещения и других операций с каталогами. Во многом он похож на Directory. Некоторые из его свойств и методов:</p><ul class="bullet_list"><li class="list_item"><p class=""><strong>Create()</strong>: создает каталог</p></li><li class="list_item"><p class=""><strong>CreateSubdirectory(path)</strong>: создает подкаталог по указанному пути path</p></li><li class="list_item"><p class=""><strong>Delete()</strong>: удаляет каталог</p></li><li class="list_item"><p class="">Свойство <strong>Exists</strong>: определяет, существует ли каталог</p></li><li class="list_item"><p class=""><strong>GetDirectories()</strong>: получает список каталогов</p></li><li class="list_item"><p class=""><strong>GetFiles()</strong>: получает список файлов</p></li><li class="list_item"><p class=""><strong>MoveTo(destDirName)</strong>: перемещает каталог</p></li><li class="list_item"><p class="">Свойство <strong>Parent</strong>: получение родительского каталога</p></li><li class="list_item"><p class="">Свойство <strong>Root</strong>: получение корневого каталога</p></li></ul><p class="">Посмотрим на примерах применение этих классов</p><a id="h-poluchenie-spiska-fajlov-i-podkatalogov" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Получение списка файлов и подкаталогов</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string dirName = "C:\\";
 
if (Directory.Exists(dirName))
{
    Console.WriteLine("Подкаталоги:");
    string[] dirs = Directory.GetDirectories(dirName);
    foreach (string s in dirs)
    {
        Console.WriteLine(s);
    }
    Console.WriteLine();
    Console.WriteLine("Файлы:");
    string[] files = Directory.GetFiles(dirName);
    foreach (string s in files)
    {
        Console.WriteLine(s);
    }
}</code></pre></div><p class="">Обратите внимание на использование слешей в именах файлов. Либо мы используем двойной слеш: "C:\", либо одинарный, но тогда перед всем путем ставим знак @: @"C:\Program Files"</p><a id="h-sozdanie-kataloga" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Создание каталога</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string path = @"C:\SomeDir";
string subpath = @"program\avalon";
DirectoryInfo dirInfo = new DirectoryInfo(path);
if (!dirInfo.Exists)
{
    dirInfo.Create();
}
dirInfo.CreateSubdirectory(subpath);</code></pre></div><p class="">Вначале проверяем, а нету ли такой директории, так как если она существует, то ее создать будет нельзя, и приложение выбросит ошибку. В итоге у нас получится следующий путь: "C:\SomeDir\program\avalon"</p><a id="h-poluchenie-informacii-o-kataloge" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Получение информации о каталоге</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string dirName = "C:\\Program Files";
 
DirectoryInfo dirInfo = new DirectoryInfo(dirName);
 
Console.WriteLine($"Название каталога: {dirInfo.Name}");
Console.WriteLine($"Полное название каталога: {dirInfo.FullName}");
Console.WriteLine($"Время создания каталога: {dirInfo.CreationTime}");
Console.WriteLine($"Корневой каталог: {dirInfo.Root}");</code></pre></div><a id="h-udalenie-kataloga" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Удаление каталога</span></h5><p class="">Если мы просто применим метод Delete к непустой папке, в которой есть какие-нибудь файлы или подкаталоги, то приложение нам выбросит ошибку. Поэтому нам надо передать в метод Delete дополнительный параметр булевого типа, который укажет, что папку надо удалять со всем содержимым:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string dirName = @"C:\SomeFolder";
 
try
{
    DirectoryInfo dirInfo = new DirectoryInfo(dirName);
    dirInfo.Delete(true);
    Console.WriteLine("Каталог удален");
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
}</code></pre></div><p class="">Или так:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string dirName = @"C:\SomeFolder";
 
Directory.Delete(dirName, true);</code></pre></div><a id="h-peremeshenie-kataloga" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Перемещение каталога</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string oldPath = @"C:\SomeFolder";
string newPath = @"C:\SomeDir";
DirectoryInfo dirInfo = new DirectoryInfo(oldPath);
if (dirInfo.Exists &amp;&amp; Directory.Exists(newPath) == false)
{
    dirInfo.MoveTo(newPath);
}</code></pre></div><p class="">При перемещении надо учитывать, что новый каталог, в который мы хотим перемесить все содержимое старого каталога, не должен существовать.</p><a id="h-rabota-s-fajlami-klassy-file-i-fileinfo" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с файлами. Классы File и FileInfo</span></h3><p class="">Подобно паре Directory/DirectoryInfo для работы с файлами предназначена пара классов File и FileInfo. С их помощью мы можем создавать, удалять, перемещать файлы, получать их свойства и многое другое.</p><p class="">Некоторые полезные методы и свойства класса FileInfo:</p><ul class="bullet_list"><li class="list_item"><p class=""><strong>CopyTo(path)</strong>: копирует файл в новое место по указанному пути path</p></li><li class="list_item"><p class=""><strong>Create()</strong>: создает файл</p></li><li class="list_item"><p class=""><strong>Delete()</strong>: удаляет файл</p></li><li class="list_item"><p class=""><strong>MoveTo(destFileName)</strong>: перемещает файл в новое место</p></li><li class="list_item"><p class="">Свойство <strong>Directory</strong>: получает родительский каталог в виде объекта DirectoryInfo</p></li><li class="list_item"><p class="">Свойство <strong>DirectoryName</strong>: получает полный путь к родительскому каталогу</p></li><li class="list_item"><p class="">Свойство <strong>Exists</strong>: указывает, существует ли файл</p></li><li class="list_item"><p class="">Свойство <strong>Length</strong>: получает размер файла</p></li><li class="list_item"><p class="">Свойство <strong>Extension</strong>: получает расширение файла</p></li><li class="list_item"><p class="">Свойство <strong>Name</strong>: получает имя файла</p></li><li class="list_item"><p class="">Свойство <strong>FullName</strong>: получает полное имя файла</p></li></ul><p class="">Класс File реализует похожую функциональность с помощью статических методов:</p><ul class="bullet_list"><li class="list_item"><p class=""><strong>Copy()</strong>: копирует файл в новое место</p></li><li class="list_item"><p class=""><strong>Create()</strong>: создает файл</p></li><li class="list_item"><p class=""><strong>Delete()</strong>: удаляет файл</p></li><li class="list_item"><p class=""><strong>Move</strong>: перемещает файл в новое место</p></li><li class="list_item"><p class=""><strong>Exists(file)</strong>: определяет, существует ли файл</p></li></ul><a id="h-poluchenie-informacii-o-fajle" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Получение информации о файле</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string path = @"C:\apache\hta.txt";
FileInfo fileInf = new FileInfo(path);
if (fileInf.Exists)
{
    Console.WriteLine("Имя файла: {0}", fileInf.Name);
    Console.WriteLine("Время создания: {0}", fileInf.CreationTime);
    Console.WriteLine("Размер: {0}", fileInf.Length);
}</code></pre></div><a id="h-udalenie-fajla" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Удаление файла</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string path = @"C:\apache\hta.txt";
FileInfo fileInf = new FileInfo(path);
if (fileInf.Exists)
{
   fileInf.Delete();
   // альтернатива с помощью класса File
   // File.Delete(path);
}</code></pre></div><a id="h-peremeshenie-fajla" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Перемещение файла</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string path = @"C:\apache\hta.txt";
string newPath = @"C:\SomeDir\hta.txt";
FileInfo fileInf = new FileInfo(path);
if (fileInf.Exists)
{
   fileInf.MoveTo(newPath);       
   // альтернатива с помощью класса File
   // File.Move(path, newPath);
}</code></pre></div><a id="h-kopirovanie-fajla" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Копирование файла</span></h5><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string path = @"C:\apache\hta.txt";
string newPath = @"C:\SomeDir\hta.txt";
FileInfo fileInf = new FileInfo(path);
if (fileInf.Exists)
{
   fileInf.CopyTo(newPath, true);      
   // альтернатива с помощью класса File
   // File.Copy(path, newPath, true);
}</code></pre></div><p class="">Метод CopyTo класса FileInfo принимает два параметра: путь, по которому файл будет копироваться, и булевое значение, которое указывает, надо ли при копировании перезаписывать файл (если true, как в случае выше, файл при копировании перезаписывается). Если же в качестве последнего параметра передать значение false, то если такой файл уже существует, приложение выдаст ошибку.</p><p class="">Метод Copy класса File принимает три параметра: путь к исходному файлу, путь, по которому файл будет копироваться, и булевое значение, указывающее, будет ли файл перезаписываться.</p><a id="h-filestream-chtenie-i-zapisь-fajla" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>FileStream. Чтение и запись файла</span></h3><p class="">Класс FileStream представляет возможности по считыванию из файла и записи в файл. Он позволяет работать как с текстовыми файлами, так и с бинарными.</p><a id="h-sozdanie-filestream" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Создание FileStream</span></h4><p class="">Для создания объекта FileStream можно использовать как конструкторы этого класса, так и статические методы класса File. Конструктор FileStream имеет множество перегруженных версий, из которых отмечу лишь одну, самую простую и используемую:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">FileStream(string filename, FileMode mode)</code></pre></div><p class="">Здесь в конструктор передается два параметра: путь к файлу и перечисление FileMode. Данное перечисление указывает на режим доступа к файлу и может принимать следующие значения:</p><ul class="bullet_list"><li class="list_item"><p class=""><strong>Append</strong>: если файл существует, то текст добавляется в конец файл. Если файла нет, то он создается. Файл открывается только для записи.</p></li><li class="list_item"><p class=""><strong>Create</strong>: создается новый файл. Если такой файл уже существует, то он перезаписывается</p></li><li class="list_item"><p class=""><strong>CreateNew</strong>: создается новый файл. Если такой файл уже существует, то он приложение выбрасывает ошибку</p></li><li class="list_item"><p class=""><strong>Open</strong>: открывает файл. Если файл не существует, выбрасывается исключение</p></li><li class="list_item"><p class=""><strong>OpenOrCreate</strong>: если файл существует, он открывается, если нет - создается новый</p></li><li class="list_item"><p class=""><strong>Truncate</strong>: если файл существует, то он перезаписывается. Файл открывается только для записи. Другой способ создания объекта FileStream представляют статические методы класса File:</p></li></ul><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">FileStream File.Open(string file, FileMode mode);
FileStream File.OpenRead(string file);
FileStream File.OpenWrite(string file);</code></pre></div><p class="">Первый метод открывает файл с учетом объекта FileMode и возвращает файловой поток FileStream. У этого метода также есть несколько перегруженных версий. Второй метод открывает поток для чтения, а третий открывает поток для записи.</p><a id="h-svojstva-i-metody-filestream" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Свойства и методы FileStream</span></h4><p class="">Рассмотрим наиболее важные его свойства и методы класса FileStream:</p><ul class="bullet_list"><li class="list_item"><p class="">Свойство <strong>Length</strong>: возвращает длину потока в байтах</p></li><li class="list_item"><p class="">Свойство <strong>Position</strong>: возвращает текущую позицию в потоке</p></li><li class="list_item"><p class="">void CopyTo(Stream destination): копирует данные из текущего потока в поток destination</p></li><li class="list_item"><p class="">Task CopyToAsync(Stream destination): асинхронная версия метода CopyToAsync</p></li><li class="list_item"><p class="">int Read(byte[] array, int offset, int count): считывает данные из файла в массив байтов и возвращает количество успешно считанных байтов. Принимает три параметра:</p><ul class="bullet_list"><li class="list_item"><p class=""><code class="inline" spellcheck="false">array</code> - массив байтов, куда будут помещены считываемые из файла данные</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">offset</code> представляет смещение в байтах в массиве array, в который считанные байты будут помещены</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">count</code> - максимальное число байтов, предназначеных для чтения. Если в файле находится меньшее количество байтов, то все они будут считаны.</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">Task&lt;int&gt; ReadAsync(byte[] array, int offset, int count)</code>: асинхронная версия метода Read</p></li></ul></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">long Seek(long offset, SeekOrigin origin)</code>: устанавливает позицию в потоке со смещением на количество байт, указанных в параметре offset.</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">void Write(byte[] array, int offset, int count)</code>: записывает в файл данные из массива байтов. Принимает три параметра:</p><ul class="bullet_list"><li class="list_item"><p class=""><code class="inline" spellcheck="false">array</code> - массив байтов, откуда данные будут записываться в файл</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">offset</code> - смещение в байтах в массиве array, откуда начинается запись байтов в поток</p></li><li class="list_item"><p class="">count - максимальное число байтов, предназначенных для записи</p></li></ul></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">ValueTask WriteAsync(byte[] array, int offset, int count)</code>: асинхронная версия метода Write</p></li></ul><a id="h-chtenie-i-zapisь-fajlov" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Чтение и запись файлов</span></h4><p class="">FileStream представляет доступ к файлам на уровне байтов, поэтому, например, если вам надо считать или записать одну или несколько строк в текстовый файл, то массив байтов надо преобразовать в строки, используя специальные методы. Поэтому для работы с текстовыми файлами применяются другие классы.</p><p class="">В то же время при работе с различными бинарными файлами, имеющими определенную структуру, FileStream может быть очень даже полезен для извлечения определенных порций информации и ее обработки. Посмотрим на примере считывания-записи в текстовый файл:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
 
namespace HelloApp
{
    class Program
    {
        static void Main(string[] args)
        {
            // создаем каталог для файла
            string path = @"C:\SomeDir2";
            DirectoryInfo dirInfo = new DirectoryInfo(path);
            if (!dirInfo.Exists)
            {
                dirInfo.Create();
            }
            Console.WriteLine("Введите строку для записи в файл:");
            string text = Console.ReadLine();
 
            // запись в файл
            using (FileStream fstream = new FileStream($"{path}\note.txt", FileMode.OpenOrCreate))
            {
                // преобразуем строку в байты
                byte[] array = System.Text.Encoding.Default.GetBytes(text);
                // запись массива байтов в файл
                fstream.Write(array, 0, array.Length);
                Console.WriteLine("Текст записан в файл");
            }
 
            // чтение из файла
            using (FileStream fstream = File.OpenRead($"{path}\note.txt"))
            {
                // преобразуем строку в байты
                byte[] array = new byte[fstream.Length];
                // считываем данные
                fstream.Read(array, 0, array.Length);
                // декодируем байты в строку
                string textFromFile = System.Text.Encoding.Default.GetString(array);
                Console.WriteLine($"Текст из файла: {textFromFile}");
            }
 
            Console.ReadLine();
        }
    }
}</code></pre></div><p class="">Разберем этот пример. Вначале создается папка для файла. Кроме того, на уровне операционной системы могут быть установлены ограничения на запись в опрееделенных каталогах, и при попытке создания и записи файла в подобных каталогах мы получим ошибку.</p><p class="">И при чтении, и при записи используется оператор using. Не надо путать данный оператор с директивой using, которая подключает пространства имен в начале файла кода. Оператор using позволяет создавать объект в блоке кода, по завершению которого вызывается метод Dispose у этого объекта, и, таким образом, объект уничтожается. В данном случае в качестве такого объекта служит переменная fstream.</p><p class="">И при записи, и при чтении применяется объект кодировки Encoding.Default из пространства имен System.Text. В данном случае мы используем два его метода: GetBytes для получения массива байтов из строки и GetString для получения строки из массива байтов.</p><p class="">В итоге введенная нами строка записывается в файл note.txt. По сути это бинарный файл (не текстовый), хотя если мы в него запишем только строку, то сможем посмотреть в удобочитаемом виде этот файл, открыв его в текстовом редакторе. Однако если мы в него запишем случайные байты, например:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">fstream.WriteByte(13);
fstream.WriteByte(103);</code></pre></div><p class="">То у нас могут возникнуть проблемы с его пониманием. Поэтому для работы непосредственно с текстовыми файлами предназначены отдельные классы - StreamReader и StreamWriter.</p><p class="">Хотя в данном простеньком консольном приложении, но в реальных приложениях рекомендуется использовать асинхронные версии методов FileStream, поскольку операции с файлами могут занимать продолжительное время и являются узким местом в работе программы. Например, изменим выше приведенную программу, применив асинхронные методы:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
using System.Threading.Tasks;
 
namespace HelloApp
{
    class Program
    {
        static async Task Main(string[] args)
        {
            // создаем каталог для файла
            string path = @"C:\SomeDir3";
            DirectoryInfo dirInfo = new DirectoryInfo(path);
            if (!dirInfo.Exists)
            {
                dirInfo.Create();
            }
            Console.WriteLine("Введите строку для записи в файл:");
            string text = Console.ReadLine();
 
            // запись в файл
            using (FileStream fstream = new FileStream($"{path}\note.txt", FileMode.OpenOrCreate))
            {
                byte[] array = System.Text.Encoding.Default.GetBytes(text);
                // асинхронная запись массива байтов в файл
                await fstream.WriteAsync(array, 0, array.Length);
                Console.WriteLine("Текст записан в файл");
            }
 
            // чтение из файла
            using (FileStream fstream = File.OpenRead($"{path}\note.txt"))
            {
                byte[] array = new byte[fstream.Length];
                // асинхронное чтение файла
                await fstream.ReadAsync(array, 0, array.Length);
 
                string textFromFile = System.Text.Encoding.Default.GetString(array);
                Console.WriteLine($"Текст из файла: {textFromFile}");
            }
 
            Console.ReadLine();
        }
    }
}</code></pre></div><a id="h-proizvolьnyj-dostup-k-fajlam" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Произвольный доступ к файлам</span></h4><p class="">Нередко бинарные файлы представляют определенную структуру. И, зная эту структуру, мы можем взять из файла нужную порцию информации или наоброт записать в определенном месте файла определенный набор байтов. Например, в wav-файлах непосредственно звуковые данные начинаются с 44 байта, а до 44 байта идут различные метаданные - количество каналов аудио, частота дискретизации и т.д.</p><p class="">С помощью метода Seek() мы можем управлять положением курсора потока, начиная с которого производится считывание или запись в файл. Этот метод принимает два параметра: offset (смещение) и позиция в файле. Позиция в файле описывается тремя значениями:</p><ul class="bullet_list"><li class="list_item"><p class="">SeekOrigin.Begin: начало файла</p></li><li class="list_item"><p class="">SeekOrigin.End: конец файла</p></li><li class="list_item"><p class="">SeekOrigin.Current: текущая позиция в файле Курсор потока, с которого начинается чтение или запись, смещается вперед на значение offset относительно позиции, указанной в качестве второго параметра. Смещение может быть отрицательным, тогда курсор сдвигается назад, если положительное - то вперед.</p></li></ul><p class="">Рассмотрим на примере:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System.IO;
using System.Text;
 
class Program
{
    static void Main(string[] args)
    {
        string text = "hello world";
             
        // запись в файл
        using (FileStream fstream = new FileStream(@"D:\note.dat", FileMode.OpenOrCreate))
        {
            // преобразуем строку в байты
            byte[] input = Encoding.Default.GetBytes(text);
            // запись массива байтов в файл
            fstream.Write(input, 0, input.Length);
            Console.WriteLine("Текст записан в файл");
 
            // перемещаем указатель в конец файла, до конца файла- пять байт
            fstream.Seek(-5, SeekOrigin.End); // минус 5 символов с конца потока
 
            // считываем четыре символов с текущей позиции
            byte[] output = new byte[4];
            fstream.Read(output, 0, output.Length);
            // декодируем байты в строку
            string textFromFile = Encoding.Default.GetString(output);
            Console.WriteLine($"Текст из файла: {textFromFile}"); // worl
 
            // заменим в файле слово world на слово house
            string replaceText = "house";
            fstream.Seek(-5, SeekOrigin.End); // минус 5 символов с конца потока
            input = Encoding.Default.GetBytes(replaceText);
            fstream.Write(input, 0, input.Length);
 
            // считываем весь файл
            // возвращаем указатель в начало файла
            fstream.Seek(0, SeekOrigin.Begin);
            output = new byte[fstream.Length];
            fstream.Read(output, 0, output.Length);
            // декодируем байты в строку
            textFromFile = Encoding.Default.GetString(output);
            Console.WriteLine($"Текст из файла: {textFromFile}"); // hello house
        }
        Console.Read();
    }
}</code></pre></div><p class="">Консольный вывод:</p><div class="code-block" data-language=""><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">Текст записан в файл
Текст из файла: worl
Текст из файла: hello house</code></pre></div><p class="">Вызов fstream.Seek(-5, SeekOrigin.End) перемещает курсор потока в конец файлов назад на пять символов:</p><p class=""><span class="component-image" contenteditable="false" draggable="true"><div contenteditable="false" class="t10yga-4 lcgrlL image" style="width: 100%;"><button class="t10yga-2 bBRluN"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5l5-5m-5-7v12"></path></svg></button><img src="./Операционные системы. Практика 1 - Yonote_files/WAN7rac.png" style="cursor: inherit;"><div class="t10yga-1 ewFUpO resize-marker"><div class="t10yga-0 dspLOs"></div></div><div class="t10yga-1 kfCAcN resize-marker"><div class="t10yga-0 gHyGzf"></div></div></div><p class="t10yga-3 bXmfPS image-caption" tabindex="-1" role="textbox" data-caption="Напишите подпись" style="width: 100%; margin: 0px auto;"></p></span><img class="ProseMirror-separator" alt=""><br class="ProseMirror-trailingBreak"></p><p class="">То есть после записи в новый файл строки "hello world" курсор будет стоять на позиции символа "w".</p><p class="">После этого считываем четыре байта начиная с символа "w". В данной кодировке 1 символ будет представлять 1 байт. Поэтому чтение 4 байтов будет эквивалентно чтению четырех сиволов: "worl".</p><p class="">Затем опять же перемещаемся в конец файла, не доходя до конца пять символов (то есть опять же с позиции символа "w"), и осуществляем запись строки "house". Таким образом, строка "house" заменяет строку "world".</p><a id="h-zakrytie-potoka" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Закрытие потока</span></h4><p class="">В примерах выше для закрытия потока применяется конструкция using. После того как все операторы и выражения в блоке using отработают, объект FileStream уничтожается. Однако мы можем выбрать и другой способ:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">FileStream fstream = null;
try
{
    fstream = new FileStream(@"D:\note3.dat", FileMode.OpenOrCreate);
    // операции с потоком
}
catch(Exception ex)
{
 
}
finally
{
    if (fstream != null)
        fstream.Close();
}</code></pre></div><p class="">Если мы не используем конструкцию using, то нам надо явным образом вызвать метод Close(): fstream.Close()</p><a id="h-chtenie-i-zapisь-tekstovyh-fajlov-streamreader-i-streamwriter" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Чтение и запись текстовых файлов. StreamReader и StreamWriter</span></h3><p class="">Класс FileStream не очень удобно применять для работы с текстовыми файлами. К тому же для этого в пространстве System.IO определены специальные классы: StreamReader и StreamWriter.</p><a id="h-zapisь-v-fajl-i-streamwriter" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Запись в файл и StreamWriter</span></h4><p class="">Для записи в текстовый файл используется класс StreamWriter. Некоторые из его конструкторов, которые могут применяться для создания объекта StreamWriter:</p><ul class="bullet_list"><li class="list_item"><p class="">StreamWriter(string path): через параметр path передается путь к файлу, который будет связан с потоком</p></li><li class="list_item"><p class="">StreamWriter(string path, bool append): параметр append указывает, надо ли добавлять в конец файла данные или же перезаписывать файл. Если равно true, то новые данные добавляются в конец файла. Если равно false, то файл перезаписываетсяя заново</p></li><li class="list_item"><p class="">StreamWriter(string path, bool append, System.Text.Encoding encoding): параметр encoding указывает на кодировку, которая будет применяться при записи</p></li></ul><p class="">Свою функциональность StreamWriter реализует через следующие методы:</p><ul class="bullet_list"><li class="list_item"><p class="">int Close(): закрывает записываемый файл и освобождает все ресурсы</p></li><li class="list_item"><p class="">void Flush(): записывает в файл оставшиеся в буфере данные и очищает буфер.</p></li><li class="list_item"><p class="">Task FlushAsync(): асинхронная версия метода Flush</p></li><li class="list_item"><p class="">void Write(string value): записывает в файл данные простейших типов, как int, double, char, string и т.д. Соответственно имеет ряд перегруженных версий для записи данных элементарных типов, например, Write(char value), Write(int value), Write(double value) и т.д.</p></li><li class="list_item"><p class="">Task WriteAsync(string value): асинхронная версия метода Write</p></li><li class="list_item"><p class="">void WriteLine(string value): также записывает данные, только после записи добавляет в файл символ окончания строки</p></li><li class="list_item"><p class="">Task WriteLineAsync(string value): асинхронная версия метода WriteLine</p></li></ul><p class="">Рассмотрим запись в файл на примере:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
 
namespace HelloApp
{
    class Program
    {
        static void Main(string[] args)
        {
            string writePath = @"C:\SomeDir\hta.txt";
 
            string text = "Привет мир!\nПока мир...";
            try
            {
                using (StreamWriter sw = new StreamWriter(writePath, false, System.Text.Encoding.Default))
                {
                    sw.WriteLine(text);
                }
 
                using (StreamWriter sw = new StreamWriter(writePath, true, System.Text.Encoding.Default))
                {
                    sw.WriteLine("Дозапись");
                    sw.Write(4.5);
                }
                Console.WriteLine("Запись выполнена");
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
    }
}</code></pre></div><p class="">В данном случае два раза создаем объект StreamWriter. В первом случае если файл существует, то он будет перезаписан. Если не существует, он будет создан. И в нее будет записан текст из переменной text. Во втором случае файл открывается для дозаписи, и будут записаны атомарные данные - строка и число. В обоих случаях будет использоваться кодировка по умолчанию.</p><p class="">По завершении программы в папке C://SomeDir мы сможем найти файл hta.txt, который будет иметь следующие строки:</p><div class="code-block" data-language=""><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">Привет мир!
Пока мир...
Дозапись
4,5</code></pre></div><p class="">Поскольку операции с файлами могут занимать продолжительное время, то в общем случае рекомендуется использовать асинхронную запись. Используем асинхронные версии методов:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
using System.Threading.Tasks;
 
namespace HelloApp
{
    class Program
    {
        static async Task Main(string[] args)
        {
            string writePath = @"C:\SomeDir\hta2.txt";
 
            string text = "Привет мир!\nПока мир...";
            try
            {
                using (StreamWriter sw = new StreamWriter(writePath, false, System.Text.Encoding.Default))
                {
                    await sw.WriteLineAsync(text);
                }
 
                using (StreamWriter sw = new StreamWriter(writePath, true, System.Text.Encoding.Default))
                {
                    await sw.WriteLineAsync("Дозапись");
                    await sw.WriteAsync("4,5");
                }
                Console.WriteLine("Запись выполнена");
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
    }
}</code></pre></div><p class="">Обратите внимание, что асинхронные версии есть не для всех перегрузок метода Write.</p><a id="h-chtenie-iz-fajla-i-streamreader" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Чтение из файла и StreamReader</span></h4><p class="">Класс StreamReader позволяет нам легко считывать весь текст или отдельные строки из текстового файла.</p><p class="">Некоторые из конструкторов класса StreamReader:</p><ul class="bullet_list"><li class="list_item"><p class="">StreamReader(string path): через параметр path передается путь к считываемому файлу</p></li><li class="list_item"><p class="">StreamReader(string path, System.Text.Encoding encoding): параметр encoding задает кодировку для чтения файла</p></li></ul><p class="">Среди методов StreamReader можно выделить следующие:</p><ul class="bullet_list"><li class="list_item"><p class="">void Close(): закрывает считываемый файл и освобождает все ресурсы</p></li><li class="list_item"><p class="">int Peek(): возвращает следующий доступный символ, если символов больше нет, то возвращает -1</p></li><li class="list_item"><p class="">int Read(): считывает и возвращает следующий символ в численном представлении. Имеет перегруженную версию: Read(char[] array, int index, int count), где array - массив, куда считываются символы, index - индекс в массиве array, начиная с которого записываются считываемые символы, и count - максимальное количество считываемых символов</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">Task&lt;int&gt; ReadAsync()</code>: асинхронная версия метода Read</p></li><li class="list_item"><p class="">string ReadLine(): считывает одну строку в файле</p></li><li class="list_item"><p class="">string ReadLineAsync(): асинхронная версия метода ReadLine</p></li><li class="list_item"><p class="">string ReadToEnd(): считывает весь текст из файла</p></li><li class="list_item"><p class="">string ReadToEndAsync(): асинхронная версия метода ReadToEnd</p></li></ul><p class="">Сначала считаем текст полностью из ранее записанного файла:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
using System.Threading.Tasks;
 
namespace HelloApp
{
    class Program
    {
        static async Task Main(string[] args)
        {
            string path = @"C:\SomeDir\hta.txt";
 
            try
            {
                using (StreamReader sr = new StreamReader(path))
                {
                    Console.WriteLine(sr.ReadToEnd());
                }
                // асинхронное чтение
                using (StreamReader sr = new StreamReader(path))
                {
                    Console.WriteLine(await sr.ReadToEndAsync());
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
    }
}</code></pre></div><p class="">Считаем текст из файла построчно:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">string path= @"C:\SomeDir\hta.txt";
   
using (StreamReader sr = new StreamReader(path, System.Text.Encoding.Default))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        Console.WriteLine(line);
    }
}
// асинхронное чтение
using (StreamReader sr = new StreamReader(path, System.Text.Encoding.Default))
{
    string line;
    while ((line = await sr.ReadLineAsync()) != null)
    {
        Console.WriteLine(line);
    }
}</code></pre></div><p class="">В данном случае считываем построчно через цикл while: while ((line = sr.ReadLine()) != null) - сначала присваиваем переменной line результат функции sr.ReadLine(), а затем проверяем, не равна ли она null. Когда объект sr дойдет до конца файла и больше строк не останется, то метод sr.ReadLine() будет возвращать null.</p><a id="h-binarnye-fajly-binarywriter-i-binaryreader" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Бинарные файлы. BinaryWriter и BinaryReader</span></h3><p class="">ля работы с бинарными файлами предназначена пара классов BinaryWriter и BinaryReader. Эти классы позволяют читать и записывать данные в двоичном формате.</p><a id="h-osnovnye-metoda-klassa-binarywriter" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Основные метода класса BinaryWriter</span></h4><ul class="bullet_list"><li class="list_item"><p class="">Close(): закрывает поток и освобождает ресурсы</p></li><li class="list_item"><p class="">Flush(): очищает буфер, дописывая из него оставшиеся данные в файл</p></li><li class="list_item"><p class="">Seek(): устанавливает позицию в потоке</p></li><li class="list_item"><p class="">Write(): записывает данные в поток</p></li></ul><a id="h-osnovnye-metoda-klassa-binaryreader" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Основные метода класса BinaryReader</span></h4><ul class="bullet_list"><li class="list_item"><p class="">Close(): закрывает поток и освобождает ресурсы</p></li><li class="list_item"><p class="">ReadBoolean(): считывает значение bool и перемещает указатель на один байт</p></li><li class="list_item"><p class="">ReadByte(): считывает один байт и перемещает указатель на один байт</p></li><li class="list_item"><p class="">ReadChar(): считывает значение char, то есть один символ, и перемещает указатель на столько байтов, сколько занимает символ в текущей кодировке</p></li><li class="list_item"><p class="">ReadDecimal(): считывает значение decimal и перемещает указатель на 16 байт</p></li><li class="list_item"><p class="">ReadDouble(): считывает значение double и перемещает указатель на 8 байт</p></li><li class="list_item"><p class="">ReadInt16(): считывает значение short и перемещает указатель на 2 байта</p></li><li class="list_item"><p class="">ReadInt32(): считывает значение int и перемещает указатель на 4 байта</p></li><li class="list_item"><p class="">ReadInt64(): считывает значение long и перемещает указатель на 8 байт</p></li><li class="list_item"><p class="">ReadSingle(): считывает значение float и перемещает указатель на 4 байта</p></li><li class="list_item"><p class="">ReadString(): считывает значение string. Каждая строка предваряется значением длины строки, которое представляет 7-битное целое число</p></li></ul><p class="">С чтением бинарных данных все просто: соответствующий метод считывает данные определенного типа и перемещает указатель на размер этого типа в байтах, например, значение типа int занимает 4 байта, поэтому BinaryReader считает 4 байта и переместит указать на эти 4 байта.</p><p class="">Посмотрим на реальной задаче применение этих классов. Попробуем с их помощью записывать и считывать из файла массив структур:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">struct State
{
    public string name;
    public string capital;
    public int area;
    public double people;
 
    public State(string n, string c, int a, double p)
    {
        name = n;
        capital = c;
        people = p;
        area = a;
    }
}
class Program
{
    static void Main(string[] args)
    {
        State[] states = new State[2];
        states[0] = new State("Германия", "Берлин",  357168,  80.8);
        states[1] = new State("Франция", "Париж", 640679, 64.7);
 
        string path= @"C:\SomeDir\states.dat";
 
        try
        {
            // создаем объект BinaryWriter
            using (BinaryWriter writer = new BinaryWriter(File.Open(path, FileMode.OpenOrCreate)))
            {
                // записываем в файл значение каждого поля структуры
                foreach (State s in states)
                {
                    writer.Write(s.name);
                    writer.Write(s.capital);
                    writer.Write(s.area);
                    writer.Write(s.people);
                }
            }
            // создаем объект BinaryReader
            using (BinaryReader reader = new BinaryReader(File.Open(path, FileMode.Open)))
            {
                // пока не достигнут конец файла
                // считываем каждое значение из файла
                while (reader.PeekChar() &gt; -1)
                {
                    string name = reader.ReadString();
                    string capital = reader.ReadString();
                    int area = reader.ReadInt32();
                    double population = reader.ReadDouble();
 
                    Console.WriteLine("Страна: {0}  столица: {1}  площадь {2} кв. км   численность населения: {3} млн. чел.", 
                        name, capital, area, population);
                }
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
        Console.ReadLine();
    }
}</code></pre></div><p class="">Итак, у нас есть структура State с некоторым набором полей. В основной программе создаем массив структур и записываем с помощью BinaryWriter. Этот класс в качестве параметра в конструкторе принимает объект Stream, который создается вызовом File.Open(path, FileMode.OpenOrCreate).</p><p class="">Затем в цикле пробегаемся по массиву структур и записываем каждое поле структуры в поток. В том порядке, в каком эти значения полей записываются, в том порядке они и будут размещаться в файле.</p><p class="">Затем считываем из записанного файла. Конструктор класса BinaryReader также в качестве параметра принимает объект потока, только в данном случае устанавливаем в качестве режима FileMode.Open: new BinaryReader(File.Open(path, FileMode.Open))</p><p class="">В цикле while считываем данные. Чтобы узнать окончание потока, вызываем метод PeekChar(). Этот метод считывает следующий символ и возвращает его числовое представление. Если символ отсутствует, то метод возвращает -1, что будет означать, что мы достигли конца файла.</p><p class="">В цикле последовательно считываем значения поле структур в том же порядке, в каком они записывались.</p><p class="">Таким образом, классы BinaryWriter и BinaryReader очень удобны для работы с бинарными файлами, особенно когда нам известна структура этих файлов. В то же время для хранения и считывания более комплексных объектов, например, объектов классов, лучше подходит другое решение - сериализация.</p><a id="h-binarnaya-serializaciya-binaryformatter" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Бинарная сериализация. BinaryFormatter</span></h3><p class="">В прошлых темах было рассмотрено как сохранять и считывать информацию с текстовых и бинарных файлов с помощью классов из пространства System.IO. Но .NET также предоставляет еще один механизм для удобной работы с бинарными файлами и их данными - бинарную сериализацию. Сериализация представляет процесс преобразования какого-либо объекта в поток байтов. После преобразования мы можем этот поток байтов или записать на диск или сохранить его временно в памяти. А при необходимости можно выполнить обратный процесс - десериализацию, то есть получить из потока байтов ранее сохраненный объект. Атрибут Serializable</p><p class="">Чтобы объект определенного класса можно было сериализовать, надо этот класс пометить атрибутом Serializable:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">[Serializable]
class Person
{
    public string Name { get; set; }
    public int Year { get; set; }
 
    public Person(string name, int year)
    {
        Name = name;
        Year = year;
    }
}</code></pre></div><p class="">При отстутствии данного атрибута объект Person не сможет быть сериализован, и при попытке сериализации будет выброшено исключение SerializationException.</p><p class="">Сериализация применяется к свойствам и полям класса. Если мы не хотим, чтобы какое-то поле класса сериализовалось, то мы его помечаем атрибутом NonSerialized:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">[Serializable]
class Person
{
    public string Name { get; set; }
    public int Year { get; set; }
     
    [NonSerialized]
    public string accNumber;
     
    public Person(string name, int year, string acc)
    {
        Name = name;
        Year = year;
        accNumber = acc;
    }
}</code></pre></div><p class="">При наследовании подобного класса, следует учитывать, что атрибут Serializable автоматически не наследуется. И если мы хотим, чтобы производный класс также мог бы быть сериализован, то опять же мы применяем к нему атрибут:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">[Serializable]
class Worker : Person</code></pre></div><p class="">Для бинарной сериализации применяется класс BinaryFormatter:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;
 
namespace Serialization
{
    [Serializable]
    class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
 
        public Person(string name, int age)
        {
            Name = name;
            Age = age;
        }
    }
     
    class Program
    {
        static void Main(string[] args)
        {
            // объект для сериализации
            Person person = new Person("Tom", 29);
            Console.WriteLine("Объект создан");
 
            // создаем объект BinaryFormatter
            BinaryFormatter formatter = new BinaryFormatter();
            // получаем поток, куда будем записывать сериализованный объект
            using (FileStream fs = new FileStream("people.dat", FileMode.OpenOrCreate))
            {
                formatter.Serialize(fs, person);
 
                Console.WriteLine("Объект сериализован");
            }
 
            // десериализация из файла people.dat
            using (FileStream fs = new FileStream("people.dat", FileMode.OpenOrCreate))
            {
                Person newPerson = (Person)formatter.Deserialize(fs);
 
                Console.WriteLine("Объект десериализован");
                Console.WriteLine($"Имя: {newPerson.Name} --- Возраст: {newPerson.Age}");
            }
 
            Console.ReadLine();
        }
    }
}</code></pre></div><p class="">Так как класс BinaryFormatter определен в пространстве имен System.Runtime.Serialization.Formatters.Binary, то в самом начале подключаем его.</p><p class="">У нас есть простенький класс Person, который объявлен с атрибутом Serializable. Благодаря этому его объекты будут доступны для сериализации.</p><p class="">Далее создаем объект BinaryFormatter: BinaryFormatter formatter = new BinaryFormatter();</p><p class="">Затем последовательно выполняем сериализацию и десериализацию. Для обоих операций нам нужен поток, в который либо сохранять, либо из которого считывать данные. Данный поток представляет объект FileStream, который записывает нужный нам объект Person в файл people.dat.</p><p class="">Сериализация одним методом formatter.Serialize(fs, person) добавляет все данные об объекте Person в файл people.dat.</p><p class="">При десериализации нам нужно еще преобразовать объект, возвращаемый функцией Deserialize, к типу Person: (Person)formatter.Deserialize(fs).</p><p class="">Как вы видите, сериализация значительно упрощает процесс сохранения объектов в бинарную форму по сравнению, например, с использованием связки классов BinaryWriter/BinaryReader.</p><p class="">Хотя мы взяли лишь один объект Person, но равным образом мы можем использовать и массив подобных объектов, список или иную коллекцию, к которой применяется атрибут Serializable. Посмотрим на примере массива:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">Person person1 = new Person("Tom", 29);
Person person2 = new Person("Bill", 25);
// массив для сериализации
Person[] people = new Person[] { person1, person2 };
 
BinaryFormatter formatter = new BinaryFormatter();
 
using (FileStream fs = new FileStream("people.dat", FileMode.OpenOrCreate))
{
    // сериализуем весь массив people
    formatter.Serialize(fs, people);
 
    Console.WriteLine("Объект сериализован");
}
 
// десериализация
using (FileStream fs = new FileStream("people.dat", FileMode.OpenOrCreate))
{
    Person[] deserilizePeople = (Person[])formatter.Deserialize(fs);
 
    foreach (Person p in deserilizePeople)
    {
        Console.WriteLine($"Имя: {p.Name} --- Возраст: {p.Age}");
    }
}</code></pre></div><a id="h-arhivaciya-i-szhatie-fajlov" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Архивация и сжатие файлов</span></h3><p class="">Кроме классов чтения-записи .NET предоставляет классы, которые позволяют сжимать файлы, а также затем восстанавливать их в исходное состояние.</p><p class="">Это классы ZipFile, DeflateStream и GZipStream, которые находятся в пространстве имен System.IO.Compression и представляют реализацию одного из алгоритмов сжатия Deflate или GZip.</p><a id="h-gzipstream-i-deflatestream" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>GZipStream и DeflateStream</span></h4><p class="">Для создания объекта GZipStream можно использовать один из его конструкторов:</p><ul class="bullet_list"><li class="list_item"><p class="">GZipStream(Stream stream, CompressionLevel level): stream представляетданные, а level задаетуровеньсжатия</p></li><li class="list_item"><p class="">GZipStream(Stream stream, CompressionMode mode): mode указывает, будут ли данные сжиматься или, наоборот, восстанавливаться и может принимать два значения:</p><ul class="bullet_list"><li class="list_item"><p class="">CompressionMode.Compress: данные сжимаются</p></li><li class="list_item"><p class="">CompressionMode.Decompress: данные восстанавливатьсяся</p></li></ul></li></ul><p class="">Если данные сжимаются, то stream указывает на поток архивируемых данных. Если данные восстанавливаются, то stream указывает на поток, куда будут передаваться восстановленные данные.</p><ul class="bullet_list"><li class="list_item"><p class="">GZipStream(Stream stream, CompressionLevel level, bool leaveMode): параметр leaveMode указывает, надо ли оставить открытым поток stream после удаления объекта GZipStream. Если значение true, то поток остается открытым</p></li><li class="list_item"><p class="">GZipStream(Stream stream, CompressionMode mode, bool leaveMode)</p></li></ul><p class="">Для управления сжатием/восстанавлением данных GZipStream предоставляет ряд методов. Основые из них:</p><ul class="bullet_list"><li class="list_item"><p class="">void CopyTo(Stream destination): копируетвседанныевпоток destination</p></li><li class="list_item"><p class="">Task CopyToAsync(Stream destination): асинхроннаяверсияметода CopyTo</p></li><li class="list_item"><p class="">void Flush(): очищает буфер, записывая все его данные в файл</p></li><li class="list_item"><p class="">Task FlushAsync(): асинхронная версия метода Flush</p></li><li class="list_item"><p class="">int Read(byte[] array, int offset, int count): считывает данные из файла в массив байтов и возвращает количество успешно считанных байтов. Принимает три параметра:</p><ul class="bullet_list"><li class="list_item"><p class="">array - массив байтов, куда будут помещены считываемые из файла данные</p></li><li class="list_item"><p class="">offset представляет смещение в байтах в массиве array, в который считанные байты будут помещены</p></li><li class="list_item"><p class="">count - максимальное число байтов, предназначенных для чтения. Если в файле находится меньшее количество байтов, то все они будут считаны.</p></li><li class="list_item"><p class="">int Read(byte[] array, int offset, int count): считывает данные из файла в массив байтов и возвращает количество успешно считанных байтов. Принимает три параметра:</p><ul class="bullet_list"><li class="list_item"><p class="">array - массив байтов, куда будут помещены считываемые из файла данные</p></li><li class="list_item"><p class="">offset представляет смещение в байтах в массиве array, в который считанные байты будут помещены</p></li><li class="list_item"><p class="">count - максимальное число байтов, предназначенных для чтения. Если в файле находится меньшее количество байтов, то все они будут считаны.</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">Task&lt;int&gt; ReadAsync(byte[] array, int offset, int count)</code>: асинхроннаяверсияметода Read</p></li></ul></li><li class="list_item"><p class="">long Seek(long offset, SeekOrigin origin): устанавливает позицию в потоке со смещением на количество байт, указанных в параметре offset.</p></li><li class="list_item"><p class="">void Write(byte[] array, int offset, int count): записывает в файл данные из массива байтов. Принимает три параметра:</p><ul class="bullet_list"><li class="list_item"><p class="">array - массив байтов, откуда данные будут записываться в файл</p></li><li class="list_item"><p class="">offset - смещение в байтах в массиве array, откуда начинается запись байтов в поток</p></li><li class="list_item"><p class="">count - максимальное число байтов, предназначенных для записи</p></li></ul></li><li class="list_item"><p class="">Task WriteAsync(byte[] array, int offset, int count): асинхроннаяверсияметода Write</p></li></ul></li></ul><p class="">Рассмотрим применение класса GZipStream на примере:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System.IO;
using System.IO.Compression;
 
class Program
{
    static void Main(string[] args)
    {
        string sourceFile = "D://test/book.pdf"; // исходный файл
        string compressedFile = "D://test/book.gz"; // сжатый файл
        string targetFile = "D://test/book_new.pdf"; // восстановленный файл
         
        // создание сжатого файла
        Compress(sourceFile, compressedFile);
        // чтение из сжатого файла
        Decompress(compressedFile, targetFile);
             
        Console.ReadLine();
    }
 
    public static void Compress(string sourceFile, string compressedFile)
    {
        // поток для чтения исходного файла
        using (FileStream sourceStream = new FileStream(sourceFile, FileMode.OpenOrCreate))
        {
            // поток для записи сжатого файла
            using (FileStream targetStream = File.Create(compressedFile))
            {
                // поток архивации
                using (GZipStream compressionStream = new GZipStream(targetStream, CompressionMode.Compress))
                {
                    sourceStream.CopyTo(compressionStream); // копируем байты из одного потока в другой
                    Console.WriteLine("Сжатие файла {0} завершено. Исходный размер: {1}  сжатый размер: {2}.",
                        sourceFile, sourceStream.Length.ToString(), targetStream.Length.ToString());
                }
            }
        }
    }
 
    public static void Decompress(string compressedFile, string targetFile)
    {
        // поток для чтения из сжатого файла
        using (FileStream sourceStream = new FileStream(compressedFile, FileMode.OpenOrCreate))
        {
            // поток для записи восстановленного файла
            using (FileStream targetStream = File.Create(targetFile))
            {
                // поток разархивации
                using (GZipStream decompressionStream = new GZipStream(sourceStream, CompressionMode.Decompress))
                {
                    decompressionStream.CopyTo(targetStream);
                    Console.WriteLine("Восстановлен файл: {0}", targetFile);
                }
            }
        }
    }
}</code></pre></div><p class="">Метод Compress получает название исходного файла, который надо архивировать, и название будущего сжатого файла.</p><p class="">Сначала создается поток для чтения из исходного файла - FileStream sourceStream. Затем создается поток для записи в сжатый файл - FileStream targetStream. Поток архивации GZipStream compressionStream инициализируется потоком targetStream и с помощью метода CopyTo() получает данные от потока sourceStream.</p><p class="">Метод Decompress производит обратную операцию по восстановлению сжатого файла в исходное состояние. Он принимает в качестве параметров пути к сжатому файлу и будущему восстановленному файлу.</p><p class="">Здесь в начале создается поток для чтения из сжатого файла FileStream sourceStream, затем поток для записи в восстанавливаемый файл FileStream targetStream. В конце создается поток GZipStream decompressionStream, который с помощью метода CopyTo() копирует восстановленные данные в поток targetStream.</p><p class="">Чтобы указать потоку GZipStream, для чего именно он предназначен - сжатия или восстановления - ему в конструктор передается параметр CompressionMode, принимающий два значения: Compress и Decompress.</p><p class="">Если бы захотели бы использовать другой класс сжатия - DeflateStream, то мы могли бы просто заменить в коде упоминания GZipStream на DeflateStream, без изменения остального кода. Их использование идентично. В то же время при использовании этих классов есть некоторые ограничения, в частности, мы можем сжимать только один файл. Для архивации группы файлы лучше выбрать другие инструменты, например, ZipFile.</p><a id="h-zipfile" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>ZipFile</span></h4><p class="">Статический класс ZipFile из простанства имен System.IO.Compression предоставляет дополнительные возможности для создания архивов. Он позволяет создавать архив из каталогов. Его основные методы:</p><ul class="bullet_list"><li class="list_item"><p class="">void CreateFromDirectory(string sourceDirectoryName, string destinationFileName): архивируетпапкупопути sourceDirectoryName вфайлсназванием destinationFileName</p></li><li class="list_item"><p class="">void CreateFromDirectory(string sourceFileName, string destinationDirectoryName): извлекаетвсефайлыиз zip-файла sourceFileName вкаталог destinationDirectoryName</p></li></ul><p class="">Оба метода имеют ряд дополнительных перегруженных версий. Рассмотрим их применение.</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO.Compression;
 
namespace HelloApp
{
    class Program
    {
        static void Main(string[] args)
        {
            string sourceFolder = "D://test/"; // исходная папка
            string zipFile = "D://test.zip"; // сжатый файл
            string targetFolder = "D://newtest"; // папка, куда распаковывается файл
 
            ZipFile.CreateFromDirectory(sourceFolder, zipFile);
            Console.WriteLine($"Папка {sourceFolder} архивирована в файл {zipFile}");
            ZipFile.ExtractToDirectory(zipFile, targetFolder);
 
            Console.WriteLine($"Файл {zipFile} распакован в папку {targetFolder}");
            Console.ReadLine();
        }
    }
}</code></pre></div><p class="">В данном случае папка "D://test/" методом ZipFile.CreateFromDirectory архивируется в файл test.zip. Затем метод ZipFile.ExtractToDirectory() распаковывает данный файл в папку "D://newtest" (если такой папки нет, она создается).</p><a id="h-rabota-s-json" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с JSON</span></h4><a id="h-serializaciya-v-json-jsonserializer" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Сериализация в JSON. JsonSerializer</span></h5><p class="">Основная функциональность по работе с JSON сосредоточена в пространстве имен System.Text.Json.</p><p class="">Ключевым типом является класс JsonSerializer, который и позволяет сериализовать объект в json и, наоборот, десериализовать код json в объект C#.</p><p class="">Для сохранения объекта в json в классе JsonSerializer определен статический метод Serialize(), который имеет ряд перегруженных версий. Некоторые из них:</p><ul class="bullet_list"><li class="list_item"><p class="">string Serialize(Object obj, Type type, JsonSerializerOptions options): сериализует объект obj типа type и возвращает код json в виде строки. Последний необязательный параметр options позволяет задать дополнительные опции сериализации</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">string Serialize&lt;T&gt;(T obj, JsonSerializerOptions options)</code>: типизированная версия сериализует объект obj типа T и возвращает код json в виде строки.</p></li><li class="list_item"><p class="">Task SerializeAsync(Object obj, Type type, JsonSerializerOptions options): сериализует объект obj типа type и возвращает код json в виде строки. Последний необязательный параметр options позволяет задать дополнительные опции сериализации</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">Task SerializeAsync&lt;T&gt;(T obj, JsonSerializerOptions options)</code>: типизированная версия сериализует объект obj типа T и возвращает код json в виде строки.</p></li><li class="list_item"><p class="">object Deserialize(string json, Type type, JsonSerializerOptions options): десериализует строку json в объект типа type и возвращает десериализованный объект. Последний необязательный параметр options позволяет задать дополнительные опции десериализации</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">T Deserialize&lt;T&gt;(string json, JsonSerializerOptions options)</code>: десериализует строку json в объект типа T и возвращает его.</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">ValueTask&lt;object&gt; DeserializeAsync(Stream utf8Json, Type type, JsonSerializerOptions options, CancellationToken token)</code>: десериализует текст UTF-8, который представляет объект JSON, в объект типа type. Последние два параметра необязательны: options позволяет задать дополнительные опции десериализации, а token устанавливает CancellationToken для отмены задачи. Возвращается десериализованный объект, обернутый в ValueTask</p></li><li class="list_item"><p class=""><code class="inline" spellcheck="false">ValueTask&lt;T&gt; DeserializeAsync&lt;T&gt;(Stream utf8Json, JsonSerializerOptions options, CancellationToken token)</code>: десериализует текст UTF-8, который представляет объект JSON, в объект типа T. Возвращается десериализованный объект, обернутый в ValueTask</p></li></ul><p class="">Рассмотрим применение класса на простом примере. Сериализуем и десериализуем простейший объект:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.Text.Json;
 
namespace HelloApp
{
    class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }
    class Program
    {
        static void Main(string[] args)
        {
            Person tom = new Person { Name = "Tom", Age = 35 };
            string json = JsonSerializer.Serialize&lt;Person&gt;(tom);
            Console.WriteLine(json);
            Person restoredPerson = JsonSerializer.Deserialize&lt;Person&gt;(json);
            Console.WriteLine(restoredPerson.Name);
        }
    }
}</code></pre></div><p class="">Здесь вначале сериализуем с помощью метода JsonSerializer.Serialize() объект типа Person в стоку с кодом json. Затем обратно получаем из этой строки объект Person посредством метода JsonSerializer.Deserialize().</p><div class="code-block" data-language=""><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">Консольный вывод:
{"Name":"Tom","Age": 35}
Tom</code></pre></div><p class="">Хотя в примере выше сериализовался/десериализовался объект класса, но подобным способом мы также можем сериализовать/десериализовать структуры.</p><a id="h-nekotorye-zamechaniya-po-serializaciideserializacii" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h5 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Некоторые замечания по сериализации/десериализации</span></h5><p class="">Объект, который подвергается десериализации, должен иметь конструктор без параметров. Например, в примере выше этот конструктор по умолчанию. Но можно также явным образом определить подобный конструктор в классе.</p><p class="">Сериализации подлежат только публичные свойства объекта (с модификатором public).</p><a id="h-zapisь-i-chtenie-fajla-json" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Запись и чтение файла json</span></h4><p class="">Поскольку методы SerializeAsyc/DeserializeAsync могут принимать поток типа Stream, то соответственно мы можем использовать файловый поток для сохранения и последующего извлечения данных:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.IO;
using System.Text.Json;
using System.Threading.Tasks;
 
namespace HelloApp
{
    class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }
    class Program
    {
        static async Task Main(string[] args)
        {
            // сохранение данных
            using (FileStream fs = new FileStream("user.json", FileMode.OpenOrCreate))
            {
                Person tom = new Person() { Name = "Tom", Age = 35 };
                await JsonSerializer.SerializeAsync&lt;Person&gt;(fs, tom);
                Console.WriteLine("Data has been saved to file");
            }
 
            // чтение данных
            using (FileStream fs = new FileStream("user.json", FileMode.OpenOrCreate))
            {
                Person restoredPerson = await JsonSerializer.DeserializeAsync&lt;Person&gt;(fs);
                Console.WriteLine($"Name: {restoredPerson.Name}  Age: {restoredPerson.Age}");
            }
        }
    }
}</code></pre></div><p class="">В данном случае вначале данные сохраняются в файл user.json и затем считываются из него.</p><a id="h-nastrojka-serializacii-s-pomoshьyu-jsonserializeroptions" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Настройка сериализации с помощью JsonSerializerOptions</span></h4><p class="">По умолчанию JsonSerializer сериализует объекты в минимифицированный код. С помощью дополнительного параметра типа JsonSerializerOptions можно настроить механизм сериализации/десериализации, используя свойства JsonSerializerOptions. Некоторые из его свойств:</p><ul class="bullet_list"><li class="list_item"><p class="">AllowTrailingCommas: устанавливает, надо ли добавлять после последнего элемента в json запятую. Если равно true, запятая добавляется</p></li><li class="list_item"><p class="">IgnoreNullValues: устанавливает, будут ли сериализоваться/десериализоваться в json объекты и их свойства со значением null</p></li><li class="list_item"><p class="">IgnoreReadOnlyProperties: аналогично устанавливает, будут ли сериализоваться свойства, предназначенные только для чтения</p></li><li class="list_item"><p class="">WriteIndented: устанавливает, будут ли добавляться в json пробелы (условно говоря, для красоты). Если равно true устанавливаются дополнительные пробелы</p></li></ul><p class="">Применение:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">var options = new JsonSerializerOptions
{
    WriteIndented = true
};
 
Person tom = new Person { Name = "Tom", Age = 35 };
string json = JsonSerializer.Serialize&lt;Person&gt;(tom, options);
Console.WriteLine(json);
Person restoredPerson = JsonSerializer.Deserialize&lt;Person&gt;(json);
Console.WriteLine(restoredPerson.Name);</code></pre></div><p class="">Консольный вывод:</p><div class="code-block" data-language=""><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">{
    "Name": "Tom",
    "Age":  35
}
Tom</code></pre></div><a id="h-nastrojka-serializacii-s-pomoshьyu-atributov" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Настройка сериализации с помощью атрибутов</span></h4><p class="">По умолчанию сериализации подлежат все публичные свойства. Кроме того, в выходном объекте json все названия свойств соответствуют названиям свойств объекта C#. Однако с помощью атрибутов JsonIgnore и JsonPropertyName.</p><p class="">Атрибут JsonIgnore позволяет исключить из сериализации определенное свойство. А JsonPropertyName позволяет замещать оригинальное название свойства. Пример использования:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.Text.Json;
using System.Text.Json.Serialization;
 
namespace HelloApp
{
    class Person
    {
        [JsonPropertyName("firstname")]
        public string Name { get; set; }
        [JsonIgnore]
        public int Age { get; set; }
    }
    class Program
    {
        static void Main(string[] args)
        {
            Person tom = new Person() { Name = "Tom", Age = 35 };
            string json = JsonSerializer.Serialize&lt;Person&gt;(tom);
            Console.WriteLine(json);
            Person restoredPerson = JsonSerializer.Deserialize&lt;Person&gt;(json);
            Console.WriteLine($"Name: {restoredPerson.Name}  Age: {restoredPerson.Age}");
        }
    }
}</code></pre></div><p class="">В данном случае свойство Age будет игнорироваться, а для свойства Name будет использоваться псевдоним "firstname". Консольный вывод:</p><div class="code-block" data-language=""><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">{"firstname":"Tom"}
Name: Tom   Age: 0</code></pre></div><p class="">Обратите внимание, что, поскольку свойство Age не было сериализовано, то при десериализации для него используется значение по умолчанию.</p><a id="h-rabota-s-xml-v-c" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с XML в C#</span></h3><a id="h-xml-dokumenty" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>XML-документы</span></h4><p class="">На сегодняшний день XML является одним из распространенных стандартов документов, который позволяет в удобной форме сохранять сложные по структуре данные. Поэтому разработчики платформы .NET включили в фреймворк широкие возможности для работы с XML.</p><p class="">Прежде чем перейти непосредственно к работе с XML-файлами, сначала рассмотрим, что представляет собой xml-документ и как он может хранить объекты, используемые в программе на c#.</p><p class="">Например, у нас есть следующий класс:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">class User
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Company { get; set; }
}</code></pre></div><p class="">В программе на C# мы можем создать список объектов класса User:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">User user1 = new User { Name = "Bill Gates", Age = 48, Company = "Microsoft" };
User user2 = new User { Name = "Larry Page", Age = 42, Company = "Google" };
List&lt;User&gt; users = new List&lt;User&gt; { user1, user2 };</code></pre></div><p class="">Чтобы сохранить список в формате xml мы могли бы использовать следующий xml-файл:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;users&gt;
  &lt;username="Bill Gates"&gt;
    &lt;company&gt;Microsoft&lt;/company&gt;
    &lt;age&gt;48&lt;/age&gt;
  &lt;/user&gt;
  &lt;username="Larry Page"&gt;
    &lt;company&gt;Google&lt;/company&gt;
    &lt;age&gt;48&lt;/age&gt;
  &lt;/user&gt;
&lt;/users&gt;</code></pre></div><p class="">XML-документ объявляет строка &lt;?xml version="1.0" encoding="utf-8" ?&gt;. Она задает версию (1.0) и кодировку (utf-8) xml. Далее идет собственно содержимое документа.</p><p class="">XML-документ должен иметь один единственный корневой элемент, внутрь которого помещаются все остальные элементы. В данном случае таким элементом является элемент <code class="inline" spellcheck="false">&lt;users&gt;</code>. Внутри корневого элемента <code class="inline" spellcheck="false">&lt;users&gt;</code> задан набор элементов <code class="inline" spellcheck="false">&lt;user&gt;</code>. Вне корневого элемента мы не можем разместить элементы user.</p><p class="">Каждый элемент определяется с помощью открывающего и закрывающего тегов, например, <code class="inline" spellcheck="false">&lt;user&gt; и &lt;/user&gt;</code>, внутри которых помещается значение или содержимое элементов. Также элемент может иметь сокращенное объявление: &lt;user /&gt; - в конце элемента помещается слеш.</p><p class="">Элемент может иметь вложенные элементы и атрибуты. В данном случае каждый элемент user имеет два вложенных элемента company и age и атрибут name.</p><p class="">Атрибуты определяются в теле элемента и имеют следующую форму: название="значение". Например, <code class="inline" spellcheck="false">&lt;user name="Bill Gates"&gt;</code>, в данном случае атрибут называется name и имеет значение Bill Gates</p><p class="">Внутри простых элементов помещается их значение. Например, <code class="inline" spellcheck="false">&lt;company&gt;Google&lt;/company&gt;</code> - элемент company имеет значение Google.</p><p class="">Названия элементов являются регистрозависимыми, поэтому <code class="inline" spellcheck="false">&lt;company&gt; и &lt;COMPANY&gt;</code> будут представлять разные элементы.</p><p class="">Таким образом, весь список Users из кода C# сопоставляется с корневым элементом <code class="inline" spellcheck="false">&lt;users&gt;</code>, каждый объект User - с элементом <code class="inline" spellcheck="false">&lt;user&gt;</code>, а каждое свойство объекта User - с атрибутом или вложенным элементом элемента <code class="inline" spellcheck="false">&lt;user&gt;</code></p><p class="">Что использовать для свойств - вложенные элементы или атрибуты? Это вопрос предпочтений - мы можем использовать как атрибуты, так и вложенные элементы. Так, в предыдущем примере вполне можно использовать вместо атрибута вложенный элемент:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;users&gt;
  &lt;user&gt;
    &lt;name&gt;Bill Gates&lt;/name&gt;
    &lt;company&gt;Microsoft&lt;/company&gt;
    &lt;age&gt;48&lt;/age&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;name&gt;Larry Page&lt;/name&gt;
    &lt;company&gt;Google&lt;/company&gt;
    &lt;age&gt;48&lt;/age&gt;
  &lt;/user&gt;
&lt;/users&gt;</code></pre></div><p class="">Теперь рассмотрим основные подходы для работы с XML, которые имеются в C#.</p><a id="h-rabota-s-xml-s-pomoshьyu-klassov-systemxml" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Работа с XML с помощью классов System.Xml</span></h3><p class="">Для работы с XML в C# можно использовать несколько подходов. В первых версиях фреймворка основной функционал работы с XML предоставляло пространство имен System.Xml. В нем определен ряд классов, которые позволяют манипулировать xml-документом:</p><ul class="bullet_list"><li class="list_item"><p class="">XmlNode: представляет узел xml. В качестве узла может использоваться весь документ, так и отдельный элемент</p></li><li class="list_item"><p class="">XmlDocument: представляет весь xml-документ</p></li><li class="list_item"><p class="">XmlElement: представляет отдельный элемент. Наследуется от класса XmlNode</p></li><li class="list_item"><p class="">XmlAttribute: представляет атрибут элемента</p></li><li class="list_item"><p class="">XmlText: представляет значение элемента в виде текста, то есть тот текст, который находится в элементе между его открывающим и закрывающим тегами</p></li><li class="list_item"><p class="">XmlComment: представляет комментарий в xml</p></li><li class="list_item"><p class="">XmlNodeList: используется для работы со списком узлов</p></li></ul><p class="">Ключевым классом, который позволяет манипулировать содержимым xml, является XmlNode, поэтому рассмотрим некоторые его основные методы и свойства:</p><ul class="bullet_list"><li class="list_item"><p class="">Свойство Attributes возвращает объект XmlAttributeCollection, который представляет коллекцию атрибутов</p></li><li class="list_item"><p class="">Свойство ChildNodes возвращает коллекцию дочерних узлов для данного узла</p></li><li class="list_item"><p class="">Свойство HasChildNodes возвращает true, если текущий узел имеет дочерние узлы</p></li><li class="list_item"><p class="">Свойство FirstChild возвращает первый дочерний узел</p></li><li class="list_item"><p class="">Свойство LastChild возвращает последний дочерний узел</p></li><li class="list_item"><p class="">Свойство InnerText возвращает текстовое значение узла</p></li><li class="list_item"><p class="">Свойство InnerXml возвращает всю внутреннюю разметку xml узла</p></li><li class="list_item"><p class="">Свойство Name возвращает название узла. Например, <code class="inline" spellcheck="false">&lt;user&gt;</code> - значение свойства Name равно "user"</p></li><li class="list_item"><p class="">Свойство ParentNode возвращает родительский узел у текущего узла</p></li><li class="list_item"><p class=""><br class="ProseMirror-trailingBreak"></p></li></ul><p class="">Применим эти классы и их функционал. И вначале для работы с xml создадим новый файл. Назовем его users.xml и определим в нем следующее содержание:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xmlversion="1.0" encoding="utf-8"?&gt;
&lt;users&gt;
  &lt;username="Bill Gates"&gt;
    &lt;company&gt;Microsoft&lt;/company&gt;
    &lt;age&gt;48&lt;/age&gt;
  &lt;/user&gt;
  &lt;username="Larry Page"&gt;
    &lt;company&gt;Google&lt;/company&gt;
    &lt;age&gt;42&lt;/age&gt;
  &lt;/user&gt;
&lt;/users&gt;</code></pre></div><p class="">Теперь пройдемся по этому документу и выведем его данные на консоль:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System.Xml;
class Program
{
    static void Main(string[] args)
    {
        XmlDocument xDoc = new XmlDocument();
        xDoc.Load("D://users.xml");
        // получим корневой элемент
        XmlElement xRoot = xDoc.DocumentElement;
        // обход всех узлов в корневом элементе
        foreach(XmlNode xnode in xRoot)
        {
            // получаем атрибут name
            if(xnode.Attributes.Count&gt;0)
            {
                XmlNode attr = xnode.Attributes.GetNamedItem("name");
                if (attr!=null)
                    Console.WriteLine(attr.Value);
            }
            // обходим все дочерние узлы элемента user
            foreach(XmlNode childnode in xnode.ChildNodes)
            {
                // если узел - company
                if(childnode.Name=="company")
                {
                    Console.WriteLine($"Компания: {childnode.InnerText}");
                }
                // если узел age
                if (childnode.Name == "age")
                {
                    Console.WriteLine($"Возраст: {childnode.InnerText}");
                }
            }
            Console.WriteLine();
        }
        Console.Read();
    }
}</code></pre></div><p class="">В итоге я получу следующий вывод на консоли:</p><p class=""><span class="component-image" contenteditable="false" draggable="true"><div contenteditable="false" class="t10yga-4 lcgrlL image" style="width: 100%;"><button class="t10yga-2 bBRluN"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5l5-5m-5-7v12"></path></svg></button><img src="./Операционные системы. Практика 1 - Yonote_files/aTFHX3j.png" style="cursor: inherit;"><div class="t10yga-1 ewFUpO resize-marker"><div class="t10yga-0 dspLOs"></div></div><div class="t10yga-1 kfCAcN resize-marker"><div class="t10yga-0 gHyGzf"></div></div></div><p class="t10yga-3 bXmfPS image-caption" tabindex="-1" role="textbox" data-caption="Напишите подпись" style="width: 100%; margin: 0px auto;"></p></span><img class="ProseMirror-separator" alt=""><br class="ProseMirror-trailingBreak"></p><p class="">Чтобы начать работу с документом xml, нам надо создать объект XmlDocument и затем загрузить в него xml-файл: xDoc.Load("users.xml");</p><p class="">При разборе xml для начала мы получаем корневой элемент документа с помощью свойства xDoc.DocumentElement. Далее уже происходит собственно разбор узлов документа.</p><p class="">В цикле foreach(XmlNode xnode in xRoot) пробегаемся по всем дочерним узлам корневого элемента. Так как дочерние узлы представляют элементы <code class="inline" spellcheck="false">&lt;user&gt;</code>, то мы можем получить их атрибуты: XmlNode attr = xnode.Attributes.GetNamedItem("name"); и вложенные элементы: foreach(XmlNode childnode in xnode.ChildNodes)</p><p class="">Чтобы определить, что за узел перед нами, мы можем сравнить его название: if(childnode.Name=="company")</p><p class="">Подобным образом мы можем создать объекты User по данным из xml:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.Collections.Generic;
using System.Xml;
 
namespace HelloApp
{
    class User
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public string Company { get; set; }
    }
    class Program
    {
        static void Main(string[] args)
        {
            List&lt;User&gt; users = new List&lt;User&gt;();
 
            XmlDocument xDoc = new XmlDocument();
            xDoc.Load("D://users.xml");
            XmlElement xRoot = xDoc.DocumentElement;
            foreach (XmlElement xnode in xRoot)
            {
                User user = new User();
                XmlNode attr = xnode.Attributes.GetNamedItem("name");
                if (attr != null)
                    user.Name = attr.Value;
 
                foreach (XmlNode childnode in xnode.ChildNodes)
                {
                    if (childnode.Name == "company")
                        user.Company = childnode.InnerText;
 
                    if (childnode.Name == "age")
                        user.Age = Int32.Parse(childnode.InnerText);
                }
                users.Add(user);
            }
            foreach (User u in users)
                Console.WriteLine($"{u.Name} ({u.Company}) - {u.Age}");
            Console.Read();
        }
    }
}</code></pre></div><a id="h-izmenenie-xml-dokumenta" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Изменение XML-документа</span></h3><p class="">Для редактирования xml-документа (изменения, добавления, удаления элементов) мы можем воспользоваться методами класса XmlNode:</p><ul class="bullet_list"><li class="list_item"><p class="">AppendChild: добавляет в конец текущего узла новый дочерний узел</p></li><li class="list_item"><p class="">InsertAfter: добавляет новый узел после определенного узла</p></li><li class="list_item"><p class="">InsertBefore: добавляет новый узел до определенного узла</p></li><li class="list_item"><p class="">RemoveAll: удаляет все дочерние узлы текущего узла</p></li><li class="list_item"><p class="">RemoveChild: удаляет у текущего узла один дочерний узел и возвращает его</p></li></ul><p class="">Класс XmlElement, унаследованный от XmlNode, добавляет еще ряд методов, которые позволяют создавать новые узлы:</p><ul class="bullet_list"><li class="list_item"><p class="">CreateNode: создает узел любого типа</p></li><li class="list_item"><p class="">CreateElement: создает узел типа XmlDocument</p></li><li class="list_item"><p class="">CreateAttribute: создает узел типа XmlAttribute</p></li><li class="list_item"><p class="">CreateTextNode: создает узел типа XmlTextNode</p></li><li class="list_item"><p class="">CreateComment: создает комментарий</p></li></ul><p class="">Возьмем xml-документ из прошлой темы и добавим в него новый элемент:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlDocument xDoc = new XmlDocument();
xDoc.Load("D://users.xml");
XmlElement xRoot = xDoc.DocumentElement;
// создаем новый элемент user
XmlElement userElem = xDoc.CreateElement("user");
// создаем атрибут name
XmlAttribute nameAttr = xDoc.CreateAttribute("name");
// создаем элементы company и age
XmlElement companyElem = xDoc.CreateElement("company");
XmlElement ageElem = xDoc.CreateElement("age");
// создаем текстовые значения для элементов и атрибута
XmlText nameText = xDoc.CreateTextNode("Mark Zuckerberg");
XmlText companyText = xDoc.CreateTextNode("Facebook");
XmlText ageText = xDoc.CreateTextNode("30");
 
//добавляем узлы
nameAttr.AppendChild(nameText);
companyElem.AppendChild(companyText);
ageElem.AppendChild(ageText);
userElem.Attributes.Append(nameAttr);
userElem.AppendChild(companyElem);
userElem.AppendChild(ageElem);
xRoot.AppendChild(userElem);
xDoc.Save("D://users.xml");</code></pre></div><p class="">Добавление элементов происходит по одной схеме. Сначала создаем элемент (xDoc.CreateElement("user")). Если элемент сложный, то есть содержит в себе другие элементы, то создаем эти элементы. Если элемент простой, содержащий внутри себя некоторое текстовое значение, то создаем этот текст (XmlText companyText = xDoc.CreateTextNode("Facebook");).</p><p class="">Затем все элементы добавляются в основной элемент user, а тот добавляется в корневой элемент (xRoot.AppendChild(userElem);).</p><p class="">Чтобы сохранить измененный документ на диск, используем метод Save: xDoc.Save("users.xml")</p><p class="">После этого в xml-файле появится следующий элемент:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;username="Mark Zuckerberg"&gt;
    &lt;company&gt;Facebook&lt;/company&gt;
    &lt;age&gt;30&lt;/age&gt;
&lt;/user&gt;</code></pre></div><a id="h-udalenie-uzlov" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Удаление узлов</span></h4><p class="">Удалим первый узел xml-документа:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlDocument xDoc = new XmlDocument();
xDoc.Load("D://users.xml");
XmlElement xRoot = xDoc.DocumentElement;
 
XmlNode firstNode = xRoot.FirstChild;
xRoot.RemoveChild(firstNode);
xDoc.Save("D://users.xml");</code></pre></div><a id="h-xpath" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h4 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>XPath</span></h4><p class="">XPath представляет язык запросов в XML. Он позволяет выбирать элементы, соответствующие определенному селектору.</p><p class="">Рассмотрим некоторые наиболее распространенные селекторы: <code class="inline" spellcheck="false">.</code> выбор текущего узла <code class="inline" spellcheck="false">..</code> выбор родительского узла <code class="inline" spellcheck="false">*</code> выбор всех дочерних узлов текущего узла <code class="inline" spellcheck="false">user</code> выбор всех узлов с определенным именем, в данном случае с именем "user" <code class="inline" spellcheck="false">@name</code> выбор атрибута текущего узла, после знака @ указывается название атрибута (в данном случае "name") <code class="inline" spellcheck="false">@+</code> выбор всех атрибутов текущего узла <code class="inline" spellcheck="false">element[3]</code> выбор определенного дочернего узла по индексу, в данном случае третьего узла <code class="inline" spellcheck="false">//user</code> выбор в документе всех узлов с именем "user" <code class="inline" spellcheck="false">user[@name='Bill Gates']</code> выбор элементов с определенным значением атрибута. В данном случае выбираются все элементы "user" с атрибутом name='Bill Gates' <code class="inline" spellcheck="false">user[company='Microsoft']</code> выбор элементов с определенным значением вложенного элемента. В данном случае выбираются все элементы "user", у которых дочерний элемент "company" имеет значение 'Microsoft' <code class="inline" spellcheck="false">//user/company</code> выбор в документе всех узлов с именем "company", которые находятся в элементах "user"</p><p class="">Действие запросов XPath основано на применении двух методов класса XmlElement:</p><ul class="bullet_list"><li class="list_item"><p class="">SelectSingleNode(): выбор единственного узла из выборки. Если выборка по запросу содержит несколько узлов, то выбирается первый</p></li><li class="list_item"><p class="">SelectNodes(): выборка по запросу коллекции узлов в виде объекта XmlNodeList</p></li></ul><p class="">Для запросов возьмем xml-документ из прошлых тем:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;users&gt;
  &lt;username="Bill Gates"&gt;
    &lt;company&gt;Microsoft&lt;/company&gt;
    &lt;age&gt;48&lt;/age&gt;
  &lt;/user&gt;
  &lt;username="Larry Page"&gt;
    &lt;company&gt;Google&lt;/company&gt;
    &lt;age&gt;42&lt;/age&gt;
  &lt;/user&gt;
&lt;/users&gt;</code></pre></div><p class="">Теперь выберем все узлы корневого элемента, то есть все элементы user:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlDocument xDoc = new XmlDocument();
xDoc.Load("D://users.xml");
XmlElement xRoot = xDoc.DocumentElement;
 
// выбор всех дочерних узлов
XmlNodeList childnodes = xRoot.SelectNodes("*");
foreach (XmlNode n in childnodes)
    Console.WriteLine(n.OuterXml);</code></pre></div><p class="">Выберем все узлы <code class="inline" spellcheck="false">&lt;user&gt;</code>:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlNodeList childnodes = xRoot.SelectNodes("user");</code></pre></div><p class="">Выведем на консоль значения атрибутов name у элементов user:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlNodeList childnodes = xRoot.SelectNodes("user");
foreach (XmlNode n in childnodes)
    Console.WriteLine(n.SelectSingleNode("@name").Value);</code></pre></div><p class="">Результатом выполнения будет следующий вывод:</p><div class="code-block" data-language=""><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">Bill Gates
Larry Page</code></pre></div><p class="">Выберем узел, у которого атрибут name имеет значение "Bill Gates":</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlNode childnode = xRoot.SelectSingleNode("user[@name='Bill Gates']");
if (childnode != null)
    Console.WriteLine(childnode.OuterXml);</code></pre></div><p class="">Выберем узел, у которого вложенный элемент "company" имеет значение "Microsoft":</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlNode childnode = xRoot.SelectSingleNode("user[company='Microsoft']");
if (childnode != null)
    Console.WriteLine(childnode.OuterXml);</code></pre></div><p class="">Допустим, нам надо получить только компании. Для этого надо осуществить выборку вниз по иерархии элементов:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XmlNodeList childnodes = xRoot.SelectNodes("//user/company");
foreach (XmlNode n in childnodes)
    Console.WriteLine(n.InnerText);</code></pre></div><a id="h-linq-to-xml-sozdanie-dokumenta-xml" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Linq to Xml. Создание документа XML</span></h3><p class="">Еще один подход к работе с Xml представляет технология LINQ to XML. Вся функциональность LINQ to XML содержится в пространстве имен System.Xml.Linq. Рассмотрим основные классы этого пространства имен:</p><ul class="bullet_list"><li class="list_item"><p class="">XAttribute: представляет атрибут xml-элемента</p></li><li class="list_item"><p class="">XComment: представляет комментарий</p></li><li class="list_item"><p class="">XDocument: представляет весь xml-документ</p></li><li class="list_item"><p class="">XElement: представляет отдельный xml-элемент</p></li></ul><p class="">Ключевым классом является XElement, который позволяет получать вложенные элементы и управлять ими. Среди его методов можно отметить следующие:</p><ul class="bullet_list"><li class="list_item"><p class="">Add(): добавляет новый атрибут или элемент</p></li><li class="list_item"><p class="">Attributes(): возвращает коллекцию атрибутов для данного элемента</p></li><li class="list_item"><p class="">Elements(): возвращает все дочерние элементы данного элемента</p></li><li class="list_item"><p class="">Remove(): удаляет данный элемент из родительского объекта</p></li><li class="list_item"><p class="">RemoveAll(): удаляет все дочерние элементы и атрибуты у данного элемента</p></li></ul><p class="">Итак, используем функциональность LINQ to XML и создадим новый XML-документ:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XDocument xdoc = new XDocument();
// создаем первый элемент
XElement iphone6 = new XElement("phone");
// создаем атрибут
XAttribute iphoneNameAttr = new XAttribute("name", "iPhone 6");
XElement iphoneCompanyElem = new XElement("company", "Apple");
XElement iphonePriceElem = new XElement("price", "40000");
// добавляем атрибут и элементы в первый элемент
iphone6.Add(iphoneNameAttr);
iphone6.Add(iphoneCompanyElem);
iphone6.Add(iphonePriceElem);
 
// создаем второй элемент
XElement galaxys5 = new XElement("phone");
XAttribute galaxysNameAttr = new XAttribute("name", "Samsung Galaxy S5");
XElement galaxysCompanyElem = new XElement("company", "Samsung");
XElement galaxysPriceElem = new XElement("price", "33000");
galaxys5.Add(galaxysNameAttr);
galaxys5.Add(galaxysCompanyElem);
galaxys5.Add(galaxysPriceElem);
// создаем корневой элемент
XElement phones = new XElement("phones");
// добавляем в корневой элемент
phones.Add(iphone6);
phones.Add(galaxys5);
// добавляем корневой элемент в документ
xdoc.Add(phones);
//сохраняем документ
xdoc.Save("phones.xml");</code></pre></div><p class="">Чтобы создать документ, нам нужно создать объект класса XDocument. Это объект самого верхнего уровня в хml-документе.</p><p class="">Элементы создаются с помощью конструктора класса XElement. Конструктор имеет ряд перегруженных версий. Первый параметр конструктора передает название элемента, например, phone. Второй параметр передает значение этого элемента.</p><p class="">Создание атрибута аналогично созданию элемента. Затем все атрибуты и элементы добавляются в элементы phone с помощью метода Add().</p><p class="">Так как документ xml должен иметь один корневой элемент, то затем все элементы phone добавляются в один контейнер - элемент phones.</p><p class="">В конце корневой элемент добавляется в объект XDocument, и этот объект сохраняется на диске в xml-файл с помощью метода Save().</p><p class="">Если мы откроем сохраненный файл phones.xml, то увидим в нем следующее содержание:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;phones&gt;
  &lt;phone name="iPhone 6"&gt;
    &lt;company&gt;Apple&lt;/company&gt;
    &lt;price&gt;40000&lt;/price&gt;
  &lt;/phone&gt;
  &lt;phone name="Samsung Galaxy S5"&gt;
    &lt;company&gt;Samsung&lt;/company&gt;
    &lt;price&gt;33000&lt;/price&gt;
  &lt;/phone&gt;
&lt;/phones&gt;</code></pre></div><p class="">Конструктор класса XElement позволяют задать набор объектов, которые будут входить в элемент. И предыдущий пример мы могли бы сократить следующим способом:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XDocument xdoc = new XDocument(new XElement("phones",
    new XElement("phone",
        new XAttribute("name", "iPhone 6"),
        new XElement("company", "Apple"),
        new XElement("price", "40000")),
    new XElement("phone",
        new XAttribute("name", "Samsung Galaxy S5"),
        new XElement("company", "Samsung"),
        new XElement("price", "33000"))));
xdoc.Save("phones.xml");</code></pre></div><a id="h-vyborka-elementov-v-linq-to-xml" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Выборка элементов в LINQ to XML</span></h3><p class="">Возьмем xml-файл, созданный в прошлой теме:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;phones&gt;
  &lt;phonename="iPhone 6"&gt;
    &lt;company&gt;Apple&lt;/company&gt;
    &lt;price&gt;40000&lt;/price&gt;
  &lt;/phone&gt;
  &lt;phonename="Samsung Galaxy S5"&gt;
    &lt;company&gt;Samsung&lt;/company&gt;
    &lt;price&gt;33000&lt;/price&gt;
  &lt;/phone&gt;
&lt;/phones&gt;</code></pre></div><p class="">Переберем его элементы и выведем их значения на консоль:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XDocument xdoc = XDocument.Load("phones.xml");
foreach (XElement phoneElement in xdoc.Element("phones").Elements("phone"))
{
    XAttribute nameAttribute = phoneElement.Attribute("name");
    XElement companyElement = phoneElement.Element("company");
    XElement priceElement = phoneElement.Element("price");
     
    if (nameAttribute != null &amp;&amp; companyElement!=null &amp;&amp; priceElement!=null)
    {
        Console.WriteLine($"Смартфон: {nameAttribute.Value}");
        Console.WriteLine($"Компания: {companyElement.Value}");
        Console.WriteLine($"Цена: {priceElement.Value}");
    }
    Console.WriteLine();
}</code></pre></div><p class="">И мы получим следующий вывод: <span class="component-image" contenteditable="false" draggable="true"><div contenteditable="false" class="t10yga-4 lcgrlL image" style="width: 100%;"><button class="t10yga-2 bBRluN"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5l5-5m-5-7v12"></path></svg></button><img src="./Операционные системы. Практика 1 - Yonote_files/xmr6fqH.png" style="cursor: inherit;"><div class="t10yga-1 ewFUpO resize-marker"><div class="t10yga-0 dspLOs"></div></div><div class="t10yga-1 kfCAcN resize-marker"><div class="t10yga-0 gHyGzf"></div></div></div><p class="t10yga-3 bXmfPS image-caption" tabindex="-1" role="textbox" data-caption="Напишите подпись" style="width: 100%; margin: 0px auto;"></p></span><img class="ProseMirror-separator" alt=""><br class="ProseMirror-trailingBreak"></p><p class="">Чтобы начать работу с имеющимся xml-файлом, надо сначала загрузить его с помощью статического метода XDocument.Load(), в который передается путь к файлу.</p><p class="">Поскольку xml хранит иерархически выстроенные элементы, то и для доступа к элементам надо идти начиная с высшего уровня в этой иерархии и далее вниз. Так, для получения элементов phone и доступа к ним надо сначала обратиться к корневому элементу, а через него уже к элементам phone: xdoc.Element("phones").Elements("phone")</p><p class="">Метод Element("имя_элемента") возвращает первый найденный элемент с таким именем. Метод Elements("имя_элемента") возвращает коллекцию одноименных элементов. В данном случае мы получаем коллекцию элементов phone и поэтому можем перебрать ее в цикле.</p><p class="">Спускаясь дальше по иерархии вниз, мы можем получить атрибуты или вложенные элементы, например, XElement companyElement = phoneElement.Element("company")</p><p class="">Значение простых элементов, которые содержат один текст, можно получить с помощью свойства Value: string company = phoneElement.Element("company").Value</p><p class="">Сочетая операторы Linq и LINQ to XML можно довольно просто извлечь из документа данные и затем обработать их. Например, имеется следующий класс:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">class Phone
{
    public string Name { get; set; }
    public string Price { get; set; }
}</code></pre></div><p class="">Создадим на основании данных в xml объекты этого класса:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">XDocument xdoc = XDocument.Load("phones.xml");
var items = from xe in xdoc.Element("phones").Elements("phone")
            where xe.Element("company").Value=="Samsung"
            select new Phone 
            { 
                Name = xe.Attribute("name").Value, 
                Price = xe.Element("price").Value 
            };
 
foreach (var item in items)
    Console.WriteLine($"{item.Name} - {item.Price}");</code></pre></div><a id="h-izmenenie-dokumenta-v-linq-to-xml" role="heading-anchor" class="heading-name ProseMirror-widget" contenteditable="false"></a><h3 class=""><span contenteditable="false" class="heading-actions "><button type="button" class="heading-anchor"><svg fill="currentColor" width="12" height="12" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path d="m20.5 10l.5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4zm-7 4h-4l1-4h4l-1 4z"></path></svg></button><button type="button" class="heading-fold "><svg fill="currentColor" width="8" height="20" viewBox="6 0 12 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" strokelinecap="round" strokelinejoin="round" strokewidth="2" d="m6 9l6 6l6-6"></path></svg></button></span><span>Изменение документа в LINQ to XML</span></h3><p class="">Возьмем xml-файл из прошлой темы:</p><div class="code-block" data-language="xml="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;phones&gt;
  &lt;phone name="iPhone 6"&gt;
    &lt;company&gt;Apple&lt;/company&gt;
    &lt;price&gt;40000&lt;/price&gt;
  &lt;/phone&gt;
  &lt;phone name="Samsung Galaxy S5"&gt;
    &lt;company&gt;Samsung&lt;/company&gt;
    &lt;price&gt;33000&lt;/price&gt;
  &lt;/phone&gt;
&lt;/phones&gt;</code></pre></div><p class="">И отредактируем его содержимое:</p><div class="code-block" data-language="csharp="><div contenteditable="false"><div class="code-actions"><select><option value="">None</option><option value="bash">Bash</option><option value="css">CSS</option><option value="clike">C</option><option value="csharp">C#</option><option value="dart">Dart</option><option value="go">Go</option><option value="markup">HTML</option><option value="objectivec">Objective-C</option><option value="java">Java</option><option value="javascript">JavaScript</option><option value="json">JSON</option><option value="mermaidjs">Mermaid Diagram</option><option value="perl">Perl</option><option value="php">PHP</option><option value="powershell">Powershell</option><option value="python">Python</option><option value="ruby">Ruby</option><option value="rust">Rust</option><option value="sql">SQL</option><option value="solidity">Solidity</option><option value="typescript">TypeScript</option><option value="yaml">YAML</option><option value="graphql">GraphQL</option><option value="groovy">Groovy</option><option value="haskell">Haskell</option><option value="ini">INI</option><option value="ocaml">OCaml</option><option value="lisp">Lisp</option><option value="lua">Lua</option><option value="scala">Scala</option><option value="toml">TOML</option><option value="visual-basic">Visual Basic</option><option value="zig">Zig</option></select><button type="button">Копировать</button></div></div><pre><code spellcheck="false">using System;
using System.Xml.Linq;
using System.Linq;
 
namespace HelloApp
{
    class Program
    {
        static void Main(string[] args)
        {
            XDocument xdoc = XDocument.Load("phones.xml");
            XElement root = xdoc.Element("phones");
 
            foreach (XElement xe in root.Elements("phone").ToList())
            {
                // изменяем название и цену
                if (xe.Attribute("name").Value == "Samsung Galaxy S5")
                {
                    xe.Attribute("name").Value = "Samsung Galaxy Note 4";
                    xe.Element("price").Value = "31000";
                }
                //если iphone - удаляем его
                else if (xe.Attribute("name").Value == "iPhone 6")
                {
                    xe.Remove();
                }
            }
            // добавляем новый элемент
            root.Add(new XElement("phone",
                        new XAttribute("name", "Nokia Lumia 930"),
                        new XElement("company", "Nokia"),
                        new XElement("price", "19500")));
            xdoc.Save("pnones1.xml");
            // выводим xml-документ на консоль
            Console.WriteLine(xdoc);
 
            Console.Read();
        }
    }
}</code></pre></div><p class="">Для изменения содержимого простых элементов и атрибутов достаточно изменить их свойство Value: xe.Element("price").Value = "31000"</p><p class="">Если же нам надо редактировать сложный элемент, то мы можем использовать комбинацию методов Add/Remove для добавления и удаления вложенных элементов.</p><p class="">В результате сформируется и сохранится на диск новый документ: <span class="component-image" contenteditable="false" draggable="true"><div contenteditable="false" class="t10yga-4 lcgrlL image" style="width: 100%;"><button class="t10yga-2 bBRluN"><svg width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5l5-5m-5-7v12"></path></svg></button><img src="./Операционные системы. Практика 1 - Yonote_files/mzTg1mG.png" style="cursor: inherit;"><div class="t10yga-1 ewFUpO resize-marker"><div class="t10yga-0 dspLOs"></div></div><div class="t10yga-1 kfCAcN resize-marker"><div class="t10yga-0 gHyGzf"></div></div></div><p class="t10yga-3 bXmfPS image-caption" tabindex="-1" role="textbox" data-caption="Напишите подпись" style="width: 100%; margin: 0px auto;"></p></span><img class="ProseMirror-separator" alt=""><br class="ProseMirror-trailingBreak"></p></div></div></div></div></div></div></div></div></div></div><div class="sc-31qmk9-1 jShBNf"></div></div></div></div></div>

    <script nonce="">
      window.EXCALIDRAW_ASSET_PATH = "/";
      window.env = {"URL":"https://app.yonote.ru","BASENAME_FOR_SUBDOMAIN":"yonote.ru","AWS_S3_UPLOAD_BUCKET_URL":"https://storage.yandexcloud.net","AWS_S3_ACCELERATE_URL":"","S3_MULTIPART_PART_SIZE":1000,"CDN_URL":"https://cdn.s.yonote.ru","COLLABORATION_URL":"wss://app.yonote.ru","DEPLOYMENT":"hosted","ENVIRONMENT":"production","SENTRY_DSN":"https://22ce3c3b117b4ba5aff1f9952fde48c6@sentry.wilix.dev/2","MAXIMUM_IMPORT_SIZE":10485760,"SUBDOMAINS_ENABLED":true,"DEFAULT_LANGUAGE":"ru_RU","EMAIL_ENABLED":true,"YANDEX_METRIKA_ID":"88038839","NOT_ALLOWED_SUBDOMAINS":"app,collaboration,auth,api,dev,docs,doc,admin,test,quota,billing,i,storage,host,updates","QUOTA_ENABLED":true,"SERVICE_WORKER_PUBLIC_KEY":"BAgpUcsS4ckV947e0MM2wLiiZI2X9FY-fS2oPa__bXMQJC6UfW-yzMwEcdMK2P54jcUWhzKfIqnefPVJe50sjz0","IS_PLAYWRIGHT_TESTING":0,"RESERVED_SUBDOMAINS":["about","account","admin","advertising","api","app","assets","archive","beta","billing","blog","cache","cdn","code","community","dashboard","developer","developers","forum","help","home","http","https","imap","localhost","mail","marketing","mobile","multiplayer","new","news","newsletter","ns1","ns2","ns3","ns4","password","profile","realtime","sandbox","script","scripts","setup","signin","signup","site","smtp","support","status","static","stats","test","update","updates","ws","wss","web","websockets","www","www1","www2","www3","www4"]};
    </script>
  
<script nonce="">
  if (window.localStorage && window.localStorage.getItem("theme") === "dark") {
    var color = "#111319";
    document.querySelector("#root").style.background = color;
    document.querySelector('meta[name="theme-color"]').setAttribute("content", color);
  }
</script>
<script type="module" nonce="" src="./Операционные системы. Практика 1 - Yonote_files/index-B_JpIUJm.js.Без названия"></script>


</body></html>